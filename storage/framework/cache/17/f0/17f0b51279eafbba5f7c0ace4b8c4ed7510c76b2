1599667542a:1:{s:9:"admin.htm";a:13:{s:8:"fileName";s:9:"admin.htm";s:7:"content";s:85463:"description = "Admin layout"

[localePicker]
forceUrl = 1

[staticMenu mainMenu]
code = "main-menu"

[staticBreadcrumbs]

[account]
redirect = "login"
paramCode = "code"
forceSecure = 0

[session]
security = "all"

[breadcrumbs]
main-ol-class = "breadcrumb"
active-class = "active"
disabled-class = "disabled"

[resetPassword]
paramCode = "code"
==
<?php
use \Spot\Shipment\Models\Settings;
use RainLab\Translate\Classes\Translator;
use RainLab\Translate\Components\LocalePicker;
protected $translator;
function onStart()
{
    if(!Auth::getUser()){
        \Flash::error($this['theme_lang']['not_allowed']);
        return Redirect::intended('login');
    }

    $this['unreaded']           =   \Zainab\SimpleContact\Models\SimpleContact::where('is_new', 1)->count();

    $this['currentPageUrl']     =   str_replace('/'.$this['currentLang'], '',$this->currentPageUrl());
}
function onQuicksearch()
{
    $data = post();
    $no_results = 0;


    $search     =   $data['query'];

    if(Auth::getUser()->hasUserPermission(["order"],'r')) {
        $orders    =   \Spot\Shipment\Models\Order::orderBy('id', 'DESC')->where(function($q) use($search){
                            $q->where('id', $search);

                            $settings       = \Spot\Shipment\Models\Settings::instance();
                            $length         = strlen($settings['tracking']['prefix_order']);
                            $prefix         = substr($search, 0, $length);
                            if (strcasecmp($prefix, $settings['tracking']['prefix_order']) == 0) {
                                $search =   str_ireplace($settings['tracking']['prefix_order'],'',$search);
                            }
                            $q->orWhere('number', 'like', "%$search%")
                            ->orWhere(function($q) use ($search){
                                $q->whereHas('sender',function($q) use($search){
                                    $q->where('name', 'like', "%$search%")
                                    ->orWhere('username', $search)
                                    ->orWhere('mobile', $search)
                                    ->orWhere('email', $search);
                                });
                            })
                            ->orWhere(function($q) use ($search){
                                $q->whereHas('receiver',function($q) use($search){
                                    $q->where('name', 'like', "%$search%")
                                    ->orWhere('username', $search)
                                    ->orWhere('mobile', $search)
                                    ->orWhere('email', $search);
                                });
                            });
                        });



        switch (Auth::getUser()->role_id) {
            case 6:
                $orders    =   $orders->whereIn('office_id', Auth::getUser()->manage->pluck('id')->toArray());
                break;
            case 5:
                $orders    =   $orders->where(function($q){
                    $q->where('sender_id', Auth::getUser()->id);
                    $q->orWhere('receiver_id', Auth::getUser()->id);
                });
                break;
            case 4:
                if(Auth::getUser()->is_superuser){
                    $orders    =   $orders->whereIn('office_id', Auth::getUser()->office);
                }else{
                    $orders    =   $orders->where(function($q){
                        $q->where(function($q){
                            //Get all employees
                            $q->where('assigned_id', Auth::getUser()->id);
                        });
                        $q->orWhere(function($q){
                            $q->whereHas('manifest', function($q){
                                $q->where(function($q) {
                                    $q->whereIn('driver_id', Auth::getUser()->id);
                                });
                                $q->orWhere(function($q){
                                    $q->whereIn('employee_id', Auth::getUser()->id);
                                });
                            });
                        });
                    });
                }
                break;
            case 3:
                $employees  =   \RainLab\User\Models\User::whereHas('groups',function($q){$q->whereIn('user_group_id', Auth::getUser()->groups->pluck('id')->toArray());})->pluck('id')->toArray();
                $orders    =   $orders->where(function($q) use($employees){
                    $q->where(function($q) use($employees){
                        //Get all employees
                        $q->whereIn('assigned_id', $employees);
                    });
                    $q->orWhere(function($q) use($employees){
                        $q->whereHas('manifest', function($q) use($employees){
                            $q->where(function($q) use($employees){
                                $q->whereIn('driver_id', $employees);
                            });
                            $q->orWhere(function($q) use($employees){
                                $q->whereIn('employee_id', $employees);
                            });
                        });
                    });
                });
                break;
        }

        $orders         =   $orders->get();
    }

    if(Auth::getUser()->hasUserPermission(["client"],'r')) {
        $clients    =   \RainLab\User\Models\User::where('role_id', 5)->orderBy('id', 'DESC')->where(function($q) use($search){
                            $q->orWhere('name', 'like', "%$search%");
                            $q->orWhere('username', 'like', "%$search%");
                            $q->orWhere('mobile', 'like', "%$search%");
                            $q->orWhere('email', 'like', "%$search%");
                        })->get();
    }

    if(!isset($clients) && !isset($orders)){
        $html = '
            <div class="kt-quick-search__result">
             <div class="kt-quick-search__message">
              '.$this['theme_lang']['no_records_found'].'
             </div>
         </div>
        ';
    }else{
        if((isset($clients) && empty($clients->toArray())) && (isset($orders) && empty($orders->toArray()))){
            $html = '
                <div class="kt-quick-search__result">
                 <div class="kt-quick-search__message">
                  '.$this['theme_lang']['no_records_found'].'
                 </div>
             </div>
            ';
        }else{
            $html = '
            <div class="kt-quick-search__result">';
                if(isset($orders)){
                    $html .= '<div class="kt-quick-search__category">
                        '.$this['theme_lang']['orders'].'
                    </div>';
                    $html .= '<div class="kt-quick-search__section">';
                    if(!empty($orders->toArray())){
                            foreach($orders as $order){
                                $html .= '<div class="kt-quick-search__item">
                                    <div class="kt-quick-search__item-img kt-quick-search__item-img--file">
                                        <img src="./admin/media/files/doc.svg" alt="" />
                                    </div>
                                    <div class="kt-quick-search__item-wrapper">
                                        <a href="'.url('dashboard/shipments').'/'.$order->id.'/view" class="kt-quick-search__item-title">
                             '.$this['settings']['tracking']['prefix_order'].$order->number.'
                            </a>
                                        <div class="kt-quick-search__item-desc">
                                            '.$this['theme_lang']['by'].' '.$order->sender->name.'
                                        </div>
                                    </div>
                                </div>';
                            }
                    }else{
                        $html .= '<div class="kt-quick-search__result">
                         <div class="kt-quick-search__message">
                          '.$this['theme_lang']['no_records_found'].'
                         </div>
                     </div>';
                    }
                    $html .= '</div>';
                }

                if(isset($clients)){
                    $html .= '<div class="kt-quick-search__category">
                        '.$this['theme_lang']['users'].'
                    </div>
                    <div class="kt-quick-search__section">';
                        if(!empty($clients->toArray())){
                            foreach($clients as $client){
                                $html .= '<div class="kt-quick-search__item">';
                                if($client->avatar){
                                    $html .= '<div class="kt-quick-search__item-img">
                                        <img src="'.$client->avatar->getThumb(100, 100, ['mode' => 'crop']).'" alt="" />
                                    </div>';
                                }else{
                                    $html .= '<div class="kt-quick-search__item-img">
                                        <!--<span class="kt-header__topbar-icon kt-header__topbar-icon--brand kt-badge--bold">{{user.name|capitalize|slice(0,1)}}</span>-->
                                        <span class="kt-header__topbar-icon kt-header__topbar-icon--brand kt-badge--bold">'.strtoupper(substr($client->name, 0, 2)).'</span>
                                    </div>';
                                }
                                $html .= '<div class="kt-quick-search__item-wrapper">
                                    <a href="'.url('dashboard/clients').'/'.$client->id.'/view" class="kt-quick-search__item-title">
                             '.$client->name.'
                            </a>
                                    <div class="kt-quick-search__item-desc">
                                        '.$client->mobile.'
                                    </div>
                                </div>';
                            }
                        }else{
                            $html .= '<div class="kt-quick-search__result">
                             <div class="kt-quick-search__message">
                              '.$this['theme_lang']['no_records_found'].'
                             </div>
                         </div>';
                        }
                    $html .= '</div>
                    </div>';
                }
            $html .= '</div>';
        }
    }
    return $html;
}
function onRefreshTime(){

}
?>
==
<!DOCTYPE html>
<html lang="{{currentLang}}" {% if currentLang == 'ar'%}direction="rtl" dir="rtl" style="direction: rtl"{% endif %} >

    <!-- begin::Head -->
    <head><!--begin::Base Path (base relative path for assets of this page) -->
        <base href="{{ 'assets/admin'|theme }}"><!--end::Base Path -->
        <meta charset="{{ settings.company.charset }}">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{{ this.page.title|__ }} | {% if settings.company.title %}{{ settings.company.title|__ }}{% else %}{{ settings.company.title }}{% endif %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <meta name="keywords" content="{% if settings.company.keywords %}{{ settings.company.keywords|__ }}{% else %}{{ settings.company.keywords }}{% endif %}" />
     <meta name="description" content="{% if settings.company.description %}{{ settings.company.description|__ }}{% else %}{{ settings.company.description }}{% endif %}">
        <meta name="author" content=""/>

        <link rel="icon" href="{% if settings.favicon %}{{ settings.favicon.path }}{% else %}./admin/media/logos/logo.ico{% endif %}" type="image/png">
        <link rel="apple-touch-icon" href="{% if settings.favicon %}{{ settings.favicon.path }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="72x72" href="{% if settings.favicon %}{{ settings.favicon.thumb(72,72) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="114x114" href="{% if settings.favicon %}{{ settings.favicon.thumb(114,114) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="144x144" href="{% if settings.favicon %}{{ settings.favicon.thumb(144,144) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>

        <!--begin::Fonts -->
        <link href="//fonts.googleapis.com/css?family=Nunito|Roboto" rel="stylesheet">
        <!--end::Fonts -->


        <!--begin::Global Theme Styles(used by all pages) -->
            <link href="./admin/vendors/global/vendors.bundle.css" rel="stylesheet" type="text/css" />
            {% if currentLang == 'ar'%}
                <link href="./admin/css/demo1/style.bundle.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-default.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-style-other.rtl.css" rel="stylesheet" type="text/css" />
                <link href="//fonts.googleapis.com/css?family=Cairo:300,400,600,700" rel="stylesheet">


                <!--begin::Layout Skins(used by all pages) -->
                <link href="./admin/css/demo1/skins/header/base/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/header/menu/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/brand/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/aside/light.rtl.css" rel="stylesheet" type="text/css" />
                <!--end::Layout Skins -->
            {% else %}
                <link href="./admin/css/demo1/style.bundle.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-default.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-style-other.css" rel="stylesheet" type="text/css" />

                <!--begin::Layout Skins(used by all pages) -->
                <link href="./admin/css/demo1/skins/header/base/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/header/menu/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/brand/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/aside/light.css" rel="stylesheet" type="text/css" />
                <!--end::Layout Skins -->
            {% endif %}
        <!--end::Global Theme Styles -->

        <!--begin::Layout Skins(used by all pages) -->
        <!--end::Layout Skins -->
        {% styles %}

        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-25459653-14"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-25459653-14');
</script>

    </head>

    <body  class="kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-header--fixed kt-header-mobile--fixed kt-subheader--enabled kt-subheader--fixed kt-subheader--solid kt-aside--enabled kt-aside--fixed"  >


     <!-- begin:: Page -->
        <!-- begin:: Header Mobile -->
        <div id="kt_header_mobile" class="kt-header-mobile  kt-header-mobile--fixed " >
            <div class="kt-header-mobile__logo">
          <a href="{{url('/')}}">
           <!--<img alt="Logo" src="{% if settings.mobile_logo %}{{ settings.mobile_logo.path }}{% else %}./admin/media/logos/logo.svg{% endif %}" style="max-height:40px"/>-->
           <img style="max-height:500px; max-width: 80%; width:auto;height:auto" src="ecargologo.jpg">

             </a>
            </div>
            <div class="kt-header-mobile__toolbar">
    <button class="kt-header-mobile__toggler kt-header-mobile__toggler--left" id="kt_aside_mobile_toggler"><span></span></button>
    <button class="kt-header-mobile__toggler" id="kt_header_mobile_toggler"><span></span></button>
             <button class="kt-header-mobile__topbar-toggler" id="kt_header_mobile_topbar_toggler"><i class="flaticon-more"></i></button>
            </div>
        </div>
        <!-- end:: Header Mobile -->
        <div class="kt-grid kt-grid--hor kt-grid--root">
      <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-page">
                <!-- begin:: Aside -->
                <button class="kt-aside-close " id="kt_aside_close_btn"><i class="la la-close"></i></button>

                <div class="kt-aside  kt-aside--fixed  kt-grid__item kt-grid kt-grid--desktop kt-grid--hor-desktop" id="kt_aside">
                 <!-- begin:: Aside -->
                    <div class="kt-aside__brand kt-grid__item " id="kt_aside_brand">
                     <div class="kt-aside__brand-logo">
                      <a href="{{url('dashboard')}}">
                       <!--<img alt="Logo" src="{% if settings.logo %}{{ settings.logo.path }}{% else %}./admin/media/logos/logo.svg{% endif %}" style="max-height:50px;"/>-->
                       <img style="max-height:500px; max-width: 80%; width:auto;height:auto" src="ecargologo.jpg">

                      </a>
                     </div>

               <div class="kt-aside__brand-tools">
                   <button class="kt-aside__brand-aside-toggler" id="kt_aside_toggler">
                    <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <polygon id="Shape" points="0 0 24 0 24 24 0 24"/>
                                            <path d="M5.29288961,6.70710318 C4.90236532,6.31657888 4.90236532,5.68341391 5.29288961,5.29288961 C5.68341391,4.90236532 6.31657888,4.90236532 6.70710318,5.29288961 L12.7071032,11.2928896 C13.0856821,11.6714686 13.0989277,12.281055 12.7371505,12.675721 L7.23715054,18.675721 C6.86395813,19.08284 6.23139076,19.1103429 5.82427177,18.7371505 C5.41715278,18.3639581 5.38964985,17.7313908 5.76284226,17.3242718 L10.6158586,12.0300721 L5.29288961,6.70710318 Z" id="Path-94" fill="#000000" fill-rule="nonzero" transform="translate(8.999997, 11.999999) scale(-1, 1) translate(-8.999997, -11.999999) "/>
                                            <path d="M10.7071009,15.7071068 C10.3165766,16.0976311 9.68341162,16.0976311 9.29288733,15.7071068 C8.90236304,15.3165825 8.90236304,14.6834175 9.29288733,14.2928932 L15.2928873,8.29289322 C15.6714663,7.91431428 16.2810527,7.90106866 16.6757187,8.26284586 L22.6757187,13.7628459 C23.0828377,14.1360383 23.1103407,14.7686056 22.7371482,15.1757246 C22.3639558,15.5828436 21.7313885,15.6103465 21.3242695,15.2371541 L16.0300699,10.3841378 L10.7071009,15.7071068 Z" id="Path-94" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(15.999997, 11.999999) scale(-1, 1) rotate(-270.000000) translate(-15.999997, -11.999999) "/>
                                        </g>
                                    </svg>
                                </span>
                    <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <polygon id="Shape" points="0 0 24 0 24 24 0 24"/>
                                            <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" id="Path-94" fill="#000000" fill-rule="nonzero"/>
                                            <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" id="Path-94" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999) "/>
                                        </g>
                                    </svg>
                                </span>
                   </button>
                   <!--
                   <button class="kt-aside__brand-aside-toggler kt-aside__brand-aside-toggler--left" id="kt_aside_toggler"><span></span></button>
                   -->
                  </div>
                 </div>
                    <!-- end:: Aside -->
                    <!-- begin:: Aside Menu -->
                    <div class="kt-aside-menu-wrapper kt-grid__item kt-grid__item--fluid" id="kt_aside_menu_wrapper">

                     <div id="kt_aside_menu" class="kt-aside-menu " data-ktmenu-vertical="1" data-ktmenu-scroll="1" data-ktmenu-dropdown-timeout="500">

                            <div class="kt-widget kt-widget--user-profile-1 kt-padding-l-20 kt-padding-r-20 kt-padding-b-0">
                                <div class="kt-widget__head">
                                    {% if user.avatar %}
                                        <div class="kt-widget__media">
                                            <img src="{{user.avatar.thumb(100, 100,'crop')}}" alt="image">
                                        </div>
                                   {% else %}
                                       <span class="kt-media kt-media--lg kt-media--brand ">
                                            <span>{{user.name|upper|slice(0,2)}}</span>
                                        </span>
                                   {% endif %}
                                    <div class="kt-widget__content kt-padding-t-10">
                                        <div class="kt-widget__section">
                                            <a href="javascript:;" class="kt-widget__username">
                                                {{user.name|capitalize}}
                                            </a>
                                            <span class="kt-widget__subtitle">
                                                {{'Welcome back'|__}},
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="kt-widget__footer kt-margin-t-15">
                                    <a href="{{'dashboard/order-create'|page}}" class="btn btn-label-brand btn-lg btn-upper btn-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon kt-svg-icon--light">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                <circle id="Oval-5" fill="#000000" opacity="0.3" cx="12" cy="12" r="10"/>
                                                <path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" id="Combined-Shape" fill="#000000"/>
                                            </g>
                                        </svg>
                                         <span>{{'Add Shipment'|__}}</span>
                                     </a>
                                </div>
                            </div>

                            {% if mainMenu.menuItems %}
                          <ul class="kt-menu__nav ">
                                    {% for item in mainMenu.menuItems if not item.viewBag.isHidden %}
                                        {% if user.hasUserPermission(item.code, 'r') or item.code is empty %}
                                   <li class="kt-menu__item  {{ item.isActive or item.isChildActive or this.page.menu_breadcrumb == item.code ? 'kt-menu__item--open kt-menu__item--here' : '' }} kt-menu__item--submenu kt-menu__item--rel" {% if item.items %}data-ktmenu-submenu-toggle="hover" aria-haspopup="true"{% endif %}>
                                                <a href="{% if item.url %}{{ item.url }}{% else %}#{% endif %}" class="kt-menu__link {% if item.items %}kt-menu__toggle{% endif %}" {{ item.viewBag.isExternal ? 'target="_blank"' }}>
                                                    <span class="kt-menu__link-icon">
                                                        {{ item.viewBag.icon|raw }}
                                                    </span>
                                                    <span class="kt-menu__link-text">{{ item.title|__ }}</span>
                                                    {% if item.items %}
                                                        <i class="kt-menu__ver-arrow la la-angle-right"></i>
                                                    {% endif %}
                                                </a>
                                                {% if item.items %}
                                                    <div class="kt-menu__submenu ">
                                                        <span class="kt-menu__arrow"></span>
                                                        <ul class="kt-menu__subnav">
                                                            {% for item in item.items if not item.viewBag.isHidden %}
                                                                {% if user.hasUserPermission(item.code, 'r') or item.code is empty %}
                                                                    <li class="kt-menu__item {{ item.isActive or item.isChildActive or (currentPageUrl == item.url|replace({'[url]': url('/')})) ? 'kt-menu__item--open kt-menu__item--here' : '' }}"  aria-haspopup="true">
                                                                        <a  href="{% if item.url %}{{ item.url|replace({'[url]': url('/')}) }}{% else %}javascript:;{% endif %}" class="kt-menu__link ">
                                                                            {% if item.viewBag.icon and item.viewBag.icon != '' %}
                                                                                {{ item.viewBag.icon|raw }}
                                                                            {% else %}
                                                                                <i class="kt-menu__link-bullet kt-menu__link-bullet--dot"><span></span></i>
                                                                            {% endif %}
                                                                            <span class="kt-menu__link-text">{{ item.title|__ }}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                {% endif %}
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            {% endif %}
                     </div>
                    </div>
                    <!-- end:: Aside Menu -->
                </div>
                <!-- end:: Aside -->

       <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">
        <!-- begin:: Header -->
                    <div id="kt_header" class="kt-header kt-grid__item  kt-header--fixed " >
                        <!-- begin:: Header Menu -->
                        <button class="kt-header-menu-wrapper-close" id="kt_header_menu_mobile_close_btn"><i class="la la-close"></i></button>
                        <div class="kt-header-menu-wrapper" id="kt_header_menu_wrapper">

                         <div id="kt_header_menu" class="kt-header-menu kt-header-menu-mobile  kt-header-menu--layout-default "  >
                          <ul class="kt-menu__nav ">
                           <li class="kt-menu__item">
                                        <a  href="javascript:;" class="kt-menu__link kt-menu__time">
                                            <i class="kt-menu__link-icon flaticon-clock-1"></i>
                                            <span class="kt-menu__link-text">
                                                <div class='time-frame'>
                                                    <div id='date-part' style="display: inline-block;"></div>
                                                    <div id='time-part' style="display: inline-block;"></div>
                                                </div>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                         </div>
                        </div>
                        <!-- end:: Header Menu -->
                        <!-- begin:: Header Topbar -->
                        <div class="kt-header__topbar">
                            <!--begin: Search -->
                            <div class="kt-header__topbar-item kt-header__topbar-item--search dropdown" id="kt_quick_search_toggle">
                                <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                    <span class="kt-header__topbar-icon">
             <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" id="Path-2" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
                                                <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" id="Path" fill="#000000" fill-rule="nonzero"/>
                                            </g>
                                        </svg>
                                    </span>
                                </div>
                                <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim dropdown-menu-lg">
                                    <div class="kt-quick-search kt-quick-search--dropdown kt-quick-search--result-compact" id="kt_quick_search_dropdown">
                                        <form method="GET" action="{{url('dashboard/search')}}"class="kt-quick-search__form">
                                            {{form_token()}}
                                            {{form_sessionKey()}}
                                            <div class="input-group">
                                                <div class="input-group-prepend"><span class="input-group-text"><i class="flaticon2-search-1"></i></span></div>
                                                <input type="text" class="form-control kt-quick-search__input" placeholder="{{'quick search'|__}}..." name="quicksearch" >
                                                <div class="input-group-append"><span class="input-group-text"><i class="la la-close kt-quick-search__close"></i></span></div>
                                            </div>
                                        </form>
                                        <div class="kt-quick-search__wrapper kt-scroll" data-scroll="true" data-height="325" data-mobile-height="200" style="direction: ltr;">

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--end: Search -->

                            <!--begin: Notifications -->
                            <div id="notificationsmenu" class="kt-header__topbar-item dropdown">
                                {% partial 'notificationsmenu' %}
                            </div>
                            <!--end: Notifications -->
                            {% if locales %}
                                <!--begin: Language bar -->
                                <div class="kt-header__topbar-item kt-header__topbar-item--langs">
                                    <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                        <span class="kt-header__topbar-icon kt-header__topbar-icon--info">
                                            {% for code, name in locales if activeLocale == code %}
                                                <img class="" src="./admin/media/flags/{{code}}.svg" alt="" />
                                            {% endfor %}
                                        </span>
                                    </div>
                                    <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim">
                                        <ul class="kt-nav kt-margin-t-10 kt-margin-b-10">
                                            {% for code, name in locales %}
                                                <li class="kt-nav__item {% if activeLocale == code %}kt-nav__item--active{% endif %} locale" rel="{{code}}">
                                                    <a href="#" class="kt-nav__link">
                                                        <span class="kt-nav__link-icon"><img src="./admin/media/flags/{{code}}.svg" alt="" /></span>
                                                        <span class="kt-nav__link-text">{{ name }}</span>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                                <!--end: Language bar -->
                            {% endif %}

                            <!--begin: User bar -->
                            <div class="kt-header__topbar-item kt-header__topbar-item--user">
                                <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                    <div class="kt-header__topbar-user">
                                        <span class="kt-header__topbar-welcome">{{'Hi'|__}},</span>
                                        <span class="kt-header__topbar-username">{{user.name|capitalize}}</span>
                                        {% if user.avatar %}
                                             <img alt="Pic" src="{{user.avatar.thumb(25, 25,'crop')}}" />
                                        {% else %}
                                           <span class="kt-badge kt-badge--username kt-badge--unified-brand kt-badge--lg kt-badge--rounded kt-font-light kt-badge--bold">{{user.name|upper|slice(0,2)}}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim dropdown-menu-xl">
                                    <!--begin: Head -->
                                    <div class="kt-user-card kt-user-card--skin-light kt-notification-item-padding-x">
                                        <div class="kt-user-card__avatar">
                                            {% if user.avatar %}
                                                 <img alt="Pic" src="{{user.avatar.thumb(60, 60,'crop')}}" />
                                            {% else %}
                                                <span class="kt-badge kt-badge--username kt-badge--unified-success kt-badge--lg kt-badge--rounded kt-badge--bold">{{user.name|capitalize|slice(0,1)}}</span>
                                             {% endif %}
                                        </div>
                                        <div class="kt-user-card__name">
                                            {{user.name|capitalize}}
                                        </div>
                                        <!--<div class="kt-user-card__badge kt-hidden">
                                            <span class="btn btn-{% if user.messages.where('read_at', null)|length > 0 %}danger{% else %}success{% endif %} btn-sm btn-bold btn-font-md">{{user.messages.where('read_at', null)|length}} {{'messages'|__}}</span>
                                        </div>-->
                                    </div>
                                    <!--end: Head -->

                                    <!--begin: Navigation -->
                                    <div class="kt-notification">
                                        <a href="{{'dashboard/profile'|page}}" class="kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-calendar-3 kt-font-success"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Profile'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'Account settings and more'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <!--
                                            {% if user.hasUserPermission('message', 'r') %}
                                                <a href="{{'dashboard/inbox'|page}}" class="kt-notification__item">
                                                    <div class="kt-notification__item-icon">
                                                        <i class="flaticon2-mail kt-font-warning"></i>
                                                    </div>
                                                    <div class="kt-notification__item-details">
                                                        <div class="kt-notification__item-title kt-font-bold">
                                                            {{'Messages'|__}}
                                                        </div>
                                                        <div class="kt-notification__item-time">
                                                            {{'Customers messages from website'|__}}{% if unreaded > 0 %} <span class="kt-badge kt-badge--danger kt-badge--inline kt-badge--pill kt-badge--rounded">{{unreaded}} {{'Unreaded'|__}}</span>{% endif %}
                                                        </div>
                                                    </div>
                                                </a>
                                            {% endif %}
                                        -->
                                        <a href="{{'dashboard/notifications'|page}}" class="kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-rocket-1 kt-font-danger"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Notifications'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'all pervious notifications'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <a href="#" class="kt-notification__item kt-hidden">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-hourglass kt-font-brand"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Tasks'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'latest tasks and requests'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <a href="#" class="kt-hidden kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-cardiogram kt-font-warning"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'Billing'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'billing & statements'|__}} <span class="kt-badge kt-badge--danger kt-badge--inline kt-badge--pill kt-badge--rounded">2 {{'pending'|__}}</span>
                                                </div>
                                            </div>
                                        </a>
                                        <div class="kt-notification__custom kt-space-between">
                                            <a class="btn btn-danger btn-block btn-bold kt-font-light" data-request="onLogout" data-request-data="redirect: '/'">{{'Sign Out'|__}}</a>
                                            <a href="#" target="_blank" class="btn btn-clean btn-sm btn-bold kt-hidden">{{'Upgrade Plan'|__}}</a>
                                        </div>
                                    </div>
                                    <!--end: Navigation -->
                                </div>
                            </div>
                            <!--end: User bar -->
                        </div>
                        <!-- end:: Header Topbar -->
                    </div>
                    <!-- end:: Header -->
        <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
                        <!-- begin:: Content Head -->
                        <div class="kt-subheader   kt-grid__item" id="kt_subheader">
                            <div class="kt-container  kt-container--fluid  ">
                                <div class="kt-subheader__main">
                                    {% set crumbOptions = breadcrumbs.options %}
                                    <h3 class="kt-subheader__title"><button class="kt-subheader__mobile-toggle kt-subheader__mobile-toggle--left" id="kt_subheader_mobile_toggle"><span></span></button>{{ this.page.title|__ }}</h3>

                                    {% if this.page.description %}
                                        <span class="kt-subheader__desc">{{ this.page.description|__ }}</span>
                                    {% endif %}
                                    <span class="kt-subheader__separator kt-subheader__separator--v"></span>
                                    {% if this.page.listing %}
                                        <div class="kt-subheader__group" id="kt_subheader_search">
                                            <span class="kt-subheader__desc" id="kt_subheader_total">{% if total_records %}{{total_records}} {{'Total'|__}}{% endif %}</span>
                                            <form class="kt-margin-l-20" id="kt_subheader_search_form" style="margin-left:10px !important ">
                                                {{form_token()}}
                                                {{form_sessionKey()}}
                                                <div class="kt-input-icon kt-input-icon--right kt-subheader__search">
                                                    <input type="text" class="form-control" placeholder="{{'Quick Search'|__}}" id="generalSearch">
                                                    <span class="kt-input-icon__icon kt-input-icon__icon--right">
                                                        <span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="bound" x="0" y="0" width="24" height="24"/><path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" id="Path-2" fill="#000000" fill-rule="nonzero" opacity="0.3"/><path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" id="Path" fill="#000000" fill-rule="nonzero"/></g></svg></span>
                                                    </span>
                                                </div>
                                            </form>
                                        </div>
                                        {% if filter_statuses %}
                                            <div class="kt-subheader__group" id="kt_subheader_search">
                                                <div class="btn-toolbar kt-margin-l-20">
                                                    <div class="dropdown" id="kt_subheader_group_actions_filter_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Filter By'|__}}<span id="filter_selected"></span></button>
                                                        <div class="dropdown-menu kt-padding-t-0 kt-padding-b-0">
                                                            <ul class="kt-nav kt-padding-t-0 kt-padding-b-10">
                                                                <li class="kt-nav__section kt-nav__section--first">
                                                                    <span class="kt-nav__section-text kt-font-boldest kt-padding-b-10">{{'Only show'|__}}:</span>
                                                                    <br />
                                                                    {% for id,name in filter_statuses %}
                                                                        <form class="kt_subheader_filter_form">
                                                                            {{form_token()}}
                                                                            {{form_sessionKey()}}
                                                                            <li class="kt-nav__item">
                                                                                <input type='hidden' class="filter" value="{{id}}" />
                                                                                <button class="btn btn-outline-dark btn-wide" style="display: block;width: 100%;" type="submit">{{name}}</button>
                                                                            </li>
                                                                        </form>
                                                                    {% endfor %}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                        <div class="kt-subheader__group kt-hidden" id="kt_subheader_group_actions">
                                            <div class="kt-subheader__desc"><span id="kt_subheader_group_selected_rows"></span> {{'Selected'|__}}:</div>
                                            <div class="btn-toolbar kt-margin-l-20">
                                                {% if statuses %}
                                                    <div class="dropdown" id="kt_subheader_group_actions_status_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Update Status'|__}}</button>
                                                        <div class="dropdown-menu">
                                                            <ul class="kt-nav">
                                                                <li class="kt-nav__section kt-nav__section--first"><span class="kt-nav__section-text">{{'Change status to'|__}}:</span></li>
                                                                {% for status in statuses %}
                                                                    <li class="kt-nav__item">
                                                                        <a href="#" class="kt-nav__link" data-toggle="status-change" data-status="{{status.value}}">
                                                                            <span class="kt-nav__link-text"><span class="kt-badge kt-badge--unified-success kt-badge--inline kt-badge--bold">{{status.name}}</span></span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% if this.page.actions.listing  is defined %}
                                                <div class="dropdown" id="kt_subheader_group_actions_shipment_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Selected Actions'|__}}<span id="filter_selected"></span></button>
                                                        <div class="dropdown-menu kt-padding-t-0 kt-padding-b-0">
                                                            <ul class="kt-nav kt-padding-t-0 kt-padding-b-10">
                                                                <li class="kt-nav__section kt-nav__section--first">
                                                                {% for button in this.page.actions.listing %}
                                                                    <button class="btn btn-outline-dark btn-sm btn-bold " id="{{button.id}}" style="display: block;width: 100%;" >{{button.title|__}}</button>
                                                                {% endfor %}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% if this.page.actions.delete is not defined %}
                                                    <button class="btn btn-label-danger btn-bold btn-sm btn-icon-h" id="kt_subheader_group_actions_delete_all">{{'Delete All'|__}}</button>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        {% if currentCrumb.show_crumb %}
                                            <div class="kt-subheader__breadcrumbs">
                                                {% set activeCrumb = '' %}
                                                {% for crumb in breadcrumbs %}
                                                    {% if crumb.in_crumb_trail %}
                                                        {% if not loop.last and not crumb.crumb_disabled %}
                                                            <a href="{{crumb.baseFileName | page}}" class="kt-subheader__breadcrumbs-home">
                                                                {% if loop.first %}
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                            <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                                            <path d="M3.95709826,8.41510662 L11.47855,3.81866389 C11.7986624,3.62303967 12.2013376,3.62303967 12.52145,3.81866389 L20.0429,8.41510557 C20.6374094,8.77841684 21,9.42493654 21,10.1216692 L21,19.0000642 C21,20.1046337 20.1045695,21.0000642 19,21.0000642 L4.99998155,21.0000673 C3.89541205,21.0000673 2.99998155,20.1046368 2.99998155,19.0000673 L2.99999828,10.1216672 C2.99999935,9.42493561 3.36258984,8.77841732 3.95709826,8.41510662 Z M10,13 C9.44771525,13 9,13.4477153 9,14 L9,17 C9,17.5522847 9.44771525,18 10,18 L14,18 C14.5522847,18 15,17.5522847 15,17 L15,14 C15,13.4477153 14.5522847,13 14,13 L10,13 Z" id="Combined-Shape" fill="#000000"/>
                                                                        </g>
                                                                    </svg>
                                                                {% else %}{{crumb.title|__}}{% endif %}</a>
                                                        {% else %}
                                                            <span class="kt-subheader__breadcrumbs-link kt-subheader__breadcrumbs-link--active">{{crumb.title|__}}</span>
                                                        {% endif %}
                                                    {% endif %}
                                                    {% if not loop.last %}
                                                        {% set activeCrumb = crumb %}
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                </div>
                                <div class="kt-subheader__toolbar">
                                    <div class="kt-subheader__wrapper">
                                        {% if this.page.daterange == 1 %}
                                            <div class="btn kt-subheader__btn-daterange" id="kt_dashboard_daterangepicker" data-toggle="kt-tooltip" title="{{'Select dashboard daterange'|__}}" data-placement="left">
                                                <span class="kt-subheader__btn-daterange-title" id="kt_dashboard_daterangepicker_title">{{'Today'|__}}</span>&nbsp;
                                                <span class="kt-subheader__btn-daterange-date" id="kt_dashboard_daterangepicker_date">{{'now'|date('d M')}}</span>
                                                <i class="flaticon2-calendar-1"></i>
                                            </div>
                                        {% else %}
                                            {% if this.page.actions %}
                                                {% if this.page.actions.add is defined %}
                                                    <a href="{{this.page.actions.add}}" class="btn btn-label-success btn-bold" id="add_new_btn">{{'Add new'|__}}&nbsp;<i class="flaticon2-add"></i></a>
                                                {% endif %}

                                                {% if this.page.actions.filter is defined %}
                                                    <a href="#" class="btn btn-label-success btn-bold" id="filter">{{'Filter'|__}}&nbsp;<i class="flaticon2-search"></i></a>
                                                {% endif %}
                                                {% if this.page.actions.buttons is defined %}
                                                    {% for button in this.page.actions.buttons %}
                                                        <a href="{% if button.url %}{{button.url}}{% else %}#{% endif %}" class="btn btn-label-{% if button.type %}{{button.type}}{% else %}primary{% endif %} btn-bold" id="{{button.id}}">{{button.title|__}}&nbsp;<i class="{{button.icon}}"></i></a>
                                                    {% endfor %}
                                                {% endif %}
                                                {% if this.page.actions.other is defined %}
                                                    <div class="dropdown dropdown-inline" data-toggle-="kt-tooltip" title="Quick actions" data-placement="left">
                                                        <a href="#" class="btn kt-subheader__btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            {{'Other Actions'|__}} &nbsp;

                                                            <!--<i class="flaticon2-calendar-1"></i>-->
                                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon kt-svg-icon--sm">
                                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                    <rect id="bound" x="0" y="0" width="24" height="24" />
                                                                    <rect id="Rectangle-8" fill="#000000" x="4" y="5" width="16" height="3" rx="1.5" />
                                                                    <path d="M7.5,11 L16.5,11 C17.3284271,11 18,11.6715729 18,12.5 C18,13.3284271 17.3284271,14 16.5,14 L7.5,14 C6.67157288,14 6,13.3284271 6,12.5 C6,11.6715729 6.67157288,11 7.5,11 Z M10.5,17 L13.5,17 C14.3284271,17 15,17.6715729 15,18.5 C15,19.3284271 14.3284271,20 13.5,20 L10.5,20 C9.67157288,20 9,19.3284271 9,18.5 C9,17.6715729 9.67157288,17 10.5,17 Z" id="Combined-Shape" fill="#000000" opacity="0.3" />
                                                                </g>
                                                            </svg>
                                                        </a>
                                                        <div class="dropdown-menu dropdown-menu-fit dropdown-menu-md dropdown-menu-right">

                                                            <!--begin::Nav-->
                                                            <ul class="kt-nav">
                                                                {% for link in this.page.actions.other %}
                                                                    <li class="kt-nav__item">
                                                                        <a href="{{link.url}}" class="kt-nav__link">
                                                                            <i class="kt-nav__link-icon {{link.icon}}"></i>
                                                                            <span class="kt-nav__link-text">{{link.name}}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            </ul>

                                                            <!--end::Nav-->
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end:: Content Head -->
                        <!-- begin:: Content -->
                     <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">



                       {% if settings.demo_mode %}
                         <div class="alert alert-warning" role="alert">
                                 {{'Please be aware that data will be replaced on this demo every 6 hours so that every one can test this demo as he needs without corrupting the data.'|__}}
                          </div>
                      {% endif %}

                       {% if settings.google.map.key == '' %}
                          <div class="alert alert-warning" role="alert">
                            {{'Google maps functions will not be activated until you enter your google key'|__}} <a href="{{url('dashboard/settings/google')}}">&nbsp;{{'Here'|__}}</a>, {{'you can follow this tutorial to generate one'|__}} <a href="https://developers.google.com/maps/documentation/embed/get-api-key" target="_blank">&nbsp;{{'Get an API Key'|__}}</a>
                          </div>
                      {% endif %}



                            {% page %}
               </div>
                        <!-- end:: Content -->
                    </div>

        <!-- begin:: Footer -->
                    <div class="kt-footer  kt-grid__item kt-grid kt-grid--desktop kt-grid--ver-desktop" id="kt_footer">
                     <div class="kt-container  kt-container--fluid ">
                      <div class="kt-footer__copyright">
                       {{ "now"|date("Y") }}&nbsp;&copy;&nbsp;<a href="//spotlayer.com" target="_blank" class="kt-link">{{'Powered By Spotlayer'|__}}</a>.
                      </div>
                      <div class="kt-footer__menu">
                       <a href="//spotlayer.com/#contact" target="_blank" class="kt-link">{{ 'Support'|__ }}</a>
                      </div>
                     </div>
                    </div>
                    <!-- end:: Footer -->
                </div>
      </div>
     </div>
        <!-- end:: Page -->


        <!-- begin::Scrolltop -->
        <div id="kt_scrolltop" class="kt-scrolltop">
         <i class="fa fa-arrow-up"></i>
        </div>
        <!-- end::Scrolltop -->

        <!-- begin::Global Config(global config for global JS sciprts) -->
        <script>
            {% set timezone = settings.timezone_offset|split(':') %}
            {% set timezone_offset = (timezone.0*60) + (timezone.1) %}
            {% set timezone_offset_hours = (timezone_offset/60) %}

            var KTAppOptions = {
                "colors":{
                    "state":{
                        "brand":"#5d78ff",
                        "light":"#ffffff",
                        "dark":"#282a3c",
                        "primary":"#5867dd",
                        "success":"#34bfa3",
                        "info":"#36a3f7",
                        "warning":"#ffb822",
                        "danger":"#fd3995"
                    },
                    "base":{
                        "label":[
                            "#c5cbe3",
                            "#a1a8c3",
                            "#3d4465",
                            "#3e4466"
                        ],
                        "shape":[
                            "#f0f3ff",
                            "#d9dffa",
                            "#afb4d4",
                            "#646c9a"
                        ]
                    }
                },
                "text":{
                    'loading' : '{{"Loading ..."|__}}'
                },
                "timezone_offset": "{{timezone_offset}}",
                "timezone_offset_hours": "{{timezone_offset_hours}}",
                "dateformat": "{{settings.dateformat|replace({'d':'dd', 'm':'mm', 'Y':'yyyy'})}}",
                "daterangeformat": "{{settings.dateformat|replace({'d':'DD', 'm':'MM', 'M':'MMM'})}}"
            };
        </script>
        <!-- end::Global Config -->

     <!--begin::Global Theme Bundle(used by all pages) -->
            <script src="./admin/vendors/custom/notifications/js/modernizr.custom.js" type="text/javascript"></script>
            <script src="./admin/vendors/custom/notifications/js/classie.js" type="text/javascript"></script>
            <script src="./admin/vendors/custom/notifications/js/notificationFx.js" type="text/javascript"></script>
        <script src="./admin/vendors/global/vendors.bundle.js" type="text/javascript"></script>
        <script src="./admin/js/demo1/scripts.bundle.js" type="text/javascript"></script>
           {% if settings.notifications.live == 1 %}
               <script src="//js.pusher.com/5.0/pusher.min.js"></script>
           {% endif %}
  <!--end::Global Theme Bundle -->

        <!--begin::Page Scripts(used by this page) -->
            {% framework extras %}
            {% scripts %}
            <script type="text/javascript">
                function flashRequest(type,message){

                    swal.fire({
                        buttonsStyling: false,
                        title: message,
                        type: type,
                        showConfirmButton: false,
                        timer: 3000
                    });
                }
                KTUtil.ready(function () {

                    $.validator.addMethod("customDateValidator", function(value, element) {
                            // parseDate throws exception if the value is invalid
                            try{$.datepicker.parseDate( KTAppOptions.dateformat, value);return true;}
                            catch(e){return false;}
                        },
                        "{{'Please enter a valid date'|__}}"
                    );

                    if('dd/mm/yyyy' == KTAppOptions.dateformat){
                        console.log(KTAppOptions.dateformat);
                        $.validator.methods.date = function (value, element) {
                            value = dateValue(value);
                            return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());;
                        }

                        function dateValue(value) {
                            var date = value.split("/");
                            return date[2] + "/" + date[1] + "/" + date[0]
                        }
                    }

                    $('body').on('click', '.locale', function(e){
                        e.preventDefault();
                        var selected = $(this).attr('rel');
                        if(selected != ''){
                            $.request('onSwitchLocale', {
                                data: {locale: selected}
                            });
                        }
                    });
                    $('select').selectpicker({
                        noneSelectedText: '{{"Nothing selected"|__}}',
                    });
                    if (KTUtil.get('kt_quick_search_dropdown')) {
                        KTQuickSearch().init(KTUtil.get('kt_quick_search_dropdown'));
                    }

                    if (KTUtil.get('kt_quick_search_inline')) {
                        KTQuickSearchInline().init(KTUtil.get('kt_quick_search_inline'));
                    }

                    if (KTUtil.get('kt_quick_search_offcanvas')) {
                        KTQuickSearchOffcanvas().init(KTUtil.get('kt_quick_search_offcanvas'));
                    }

                    $('input.decimal').blur(function(){
                        var num = parseFloat($(this).val());
                        var cleanNum = num.toFixed({{primary_currency.initbiz_money_fraction_digits}});
                        $(this).val(cleanNum);
                    });

                    var arrows;
                    if (KTUtil.isRTL()) {
                        arrows = {
                            leftArrow: '<i class="la la-angle-right"></i>',
                            rightArrow: '<i class="la la-angle-left"></i>'
                        }
                    } else {
                        arrows = {
                            leftArrow: '<i class="la la-angle-left"></i>',
                            rightArrow: '<i class="la la-angle-right"></i>'
                        }
                    }

                    $.fn.datepicker.dates['{{currentLang}}'] = {
                        days: ["{{'Sunday'|__}}", "{{'Monday'|__}}", "{{'Tuesday'|__}}", "{{'Wednesday'|__}}", "{{'Thursday'|__}}", "{{'Friday'|__}}", "{{'Saturday'|__}}"],
                        daysShort: ["{{'Sun'|__}}", "{{'Mon'|__}}", "{{'Tue'|__}}", "{{'Wed'|__}}", "{{'Thu'|__}}", "{{'Fri'|__}}", "{{'Sat'|__}}"],
                        daysMin: ["{{'Su'|__}}", "{{'Mo'|__}}", "{{'Tu'|__}}", "{{'We'|__}}", "{{'Th'|__}}", "{{'Fr'|__}}", "{{'Sa'|__}}"],
                        months: ["{{'January'|__}}", "{{'February'|__}}", "{{'March'|__}}", "{{'April'|__}}", "{{'May'|__}}", "{{'June'|__}}", "{{'July'|__}}", "{{'August'|__}}", "{{'September'|__}}", "{{'October'|__}}", "{{'November'|__}}", "{{'December'|__}}"],
                        monthsShort: ["{{'Jan'|__}}", "{{'Feb'|__}}", "{{'Mar'|__}}", "{{'Apr'|__}}", "{{'May'|__}}", "{{'Jun'|__}}", "{{'Jul'|__}}", "{{'Aug'|__}}", "{{'Sep'|__}}", "{{'Oct'|__}}", "{{'Nov'|__}}", "{{'Dec'|__}}"],
                        today: "{{'Today'|__}}",
                        clear: "{{'Clear'|__}}",
                        format: KTAppOptions.dateformat,
                        titleFormat: KTAppOptions.dateformat, /* Leverages same syntax as 'format' */
                        weekStart: 0
                    };
                    $('.date').datepicker({
                        rtl: KTUtil.isRTL(),
                        language: '{{currentLang}}',
                        format: KTAppOptions.dateformat,
                        todayHighlight: true,
                        orientation: "bottom left",
                        templates: arrows
                    });

                        var momentNow = moment();

                    console.log({{timezone_offset}});
                    console.log({{timezone_offset_hours}});
                    console.log(momentNow.utcOffset(4));
                    console.log(momentNow.utcOffset({{timezone_offset_hours}}));
                    var interval = setInterval(function() {
                        if('ar' == '{{currentLang}}'){
                            moment.locale('ar-sa');
                        }
                        var momentNow = moment();
                        $('#date-part').html(momentNow.utcOffset({{timezone_offset_hours}}).format(KTAppOptions.daterangeformat) + ' ');
                        $('#time-part').html(momentNow.utcOffset({{timezone_offset_hours}}).format('hh:mm:ss A'));
                    }, 100);

                });

                "use strict";

                var KTQuickSearch = function() {
                    var target;
                    var form;
                    var input;
                    var closeIcon;
                    var resultWrapper;
                    var resultDropdown;
                    var resultDropdownToggle;
                    var inputGroup;
                    var query = '';

                    var hasResult = false;
                    var timeout = false;
                    var isProcessing = false;
                    var requestTimeout = 200; // ajax request fire timeout in milliseconds
                    var spinnerClass = 'kt-spinner kt-spinner--input kt-spinner--sm kt-spinner--brand kt-spinner--right';
                    var resultClass = 'kt-quick-search--has-result';
                    var minLength = 2;

                    var showProgress = function() {
                        isProcessing = true;
                        KTUtil.addClass(inputGroup, spinnerClass);

                        if (closeIcon) {
                            KTUtil.hide(closeIcon);
                        }
                    }

                    var hideProgress = function() {
                        isProcessing = false;
                        KTUtil.removeClass(inputGroup, spinnerClass);

                        if (closeIcon) {
                            if (input.value.length < minLength) {
                                KTUtil.hide(closeIcon);
                            } else {
                                KTUtil.show(closeIcon, 'flex');
                            }
                        }
                    }

                    var showDropdown = function() {
                        if (resultDropdownToggle && !KTUtil.hasClass(resultDropdown, 'show')) {
                            $(resultDropdownToggle).dropdown('toggle');
                            $(resultDropdownToggle).dropdown('update');
                        }
                    }

                    var hideDropdown = function() {
                        if (resultDropdownToggle && KTUtil.hasClass(resultDropdown, 'show')) {
                            $(resultDropdownToggle).dropdown('toggle');
                        }
                    }

                    var processSearch = function() {
                        if (hasResult && query === input.value) {
                            hideProgress();
                            KTUtil.addClass(target, resultClass);
                            showDropdown();
                            KTUtil.scrollUpdate(resultWrapper);

                            return;
                        }

                        query = input.value;

                        KTUtil.removeClass(target, resultClass);
                        showProgress();
                        hideDropdown();

                        $.request('onQuicksearch', {
                            data: {query: query},
                            success: function(res) {
                                hasResult = true;
                                hideProgress();
                                KTUtil.addClass(target, resultClass);
                                KTUtil.setHTML(resultWrapper, res.result);
                                showDropdown();
                                KTUtil.scrollUpdate(resultWrapper);
                            },
                            error: function(res) {
                                hasResult = false;
                                hideProgress();
                                KTUtil.addClass(target, resultClass);
                                KTUtil.setHTML(resultWrapper, '<span class="kt-quick-search__message kt-font-danger">{{"Connection error. Pleae try again later"|__}}.</div>');
                                showDropdown();
                                KTUtil.scrollUpdate(resultWrapper);
                            }
                        });
                    }

                    var handleCancel = function(e) {
                        input.value = '';
                        query = '';
                        hasResult = false;
                        KTUtil.hide(closeIcon);
                        KTUtil.removeClass(target, resultClass);
                        hideDropdown();
                    }

                    var handleSearch = function() {
                        if (input.value.length < minLength) {
                            hideProgress();
                            hideDropdown();

                            return;
                        }

                        if (isProcessing == true) {
                            return;
                        }

                        if (timeout) {
                            clearTimeout(timeout);
                        }

                        timeout = setTimeout(function() {
                            processSearch();
                        }, requestTimeout);
                    }

                    return {
                        init: function(element) {
                            // Init
                            target = element;
                            form = KTUtil.find(target, '.kt-quick-search__form');
                            input = KTUtil.find(target, '.kt-quick-search__input');
                            closeIcon = KTUtil.find(target, '.kt-quick-search__close');
                            resultWrapper = KTUtil.find(target, '.kt-quick-search__wrapper');
                            resultDropdown = KTUtil.find(target, '.dropdown-menu');
                            resultDropdownToggle = KTUtil.find(target, '[data-toggle="dropdown"]');
                            inputGroup = KTUtil.find(target, '.input-group');

                            // Attach input keyup handler
                            KTUtil.addEvent(input, 'keyup', handleSearch);
                            KTUtil.addEvent(input, 'focus', handleSearch);

                            // Prevent enter click
                            form.onkeypress = function(e) {
                                var key = e.charCode || e.keyCode || 0;
                                if (key == 13) {
                                    e.preventDefault();
                                }
                            }

                            KTUtil.addEvent(closeIcon, 'click', handleCancel);
                        }
                    };
                };

                var KTQuickSearchInline = KTQuickSearch;
                var KTQuickSearchOffcanvas = KTQuickSearch;
                {% if settings.notifications.live == 1 %}
                    var pusher = new Pusher('{{ settings.notifications.pusher.key }}', {cluster: '{{ settings.notifications.pusher.cluster }}',forceTLS: true});
                    var presenceChannel = pusher.subscribe('spotlayer');
                    presenceChannel.bind('notification', function(data) {
                        //if(data.id != {{user.id}}){
                        if(data.for_userid == {{user.id}}){
                            setTimeout( function() {
                                // create the notification
                                // check if the reciever is the targeted user
                                if(data.thumb == 'icon'){
                                    var thumb_content = '<i class="'+data.icon+'"></i>';
                                }else{
                                    var thumb_content = '<img src="./admin/vendors/custom/notifications/img/default.jpg"/>';
                                }
                                var notification = new NotificationFx({
                                    message : '<div class="ns-thumb '+data.thumb+'">'+thumb_content+'</div><div class="ns-content notice"><p><a href="{{url('dashboard/notifications')}}">'+data.sender.name+'</a> '+data.subject+'.</p></div>',
                                    layout : 'other',
                                    ttl : 5000,
                                    effect : 'thumbslider',
                                    type : 'notice', // notice, warning, error or success
                                    onClose : function() {
                                        //dismiss notification and make it as readed;
                                    }
                                });
                                // show the notification
                                notification.show();
                                if(data.sound){
                                    let audio = new Audio('./admin/media/notifications/notification.mp3');
                                    audio.play();
                                }
                                $.request('onRefreshTime', {
                                    data: {id: {{user.id}}},
                                    update: { notificationsmenu: '#notificationsmenu' },
                                    complete: function(e) {
                                        notificationPanel();
                                    }
                                });
                            }, 4000 );
                        }


                    });
                {% endif %}
            </script>
        <!--end::Page Scripts -->
    </body>
    <!-- end::Body -->
</html>
";s:5:"mtime";i:1599571358;s:6:"markup";s:74675:"<!DOCTYPE html>
<html lang="{{currentLang}}" {% if currentLang == 'ar'%}direction="rtl" dir="rtl" style="direction: rtl"{% endif %} >

    <!-- begin::Head -->
    <head><!--begin::Base Path (base relative path for assets of this page) -->
        <base href="{{ 'assets/admin'|theme }}"><!--end::Base Path -->
        <meta charset="{{ settings.company.charset }}">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>{{ this.page.title|__ }} | {% if settings.company.title %}{{ settings.company.title|__ }}{% else %}{{ settings.company.title }}{% endif %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
     <meta name="keywords" content="{% if settings.company.keywords %}{{ settings.company.keywords|__ }}{% else %}{{ settings.company.keywords }}{% endif %}" />
     <meta name="description" content="{% if settings.company.description %}{{ settings.company.description|__ }}{% else %}{{ settings.company.description }}{% endif %}">
        <meta name="author" content=""/>

        <link rel="icon" href="{% if settings.favicon %}{{ settings.favicon.path }}{% else %}./admin/media/logos/logo.ico{% endif %}" type="image/png">
        <link rel="apple-touch-icon" href="{% if settings.favicon %}{{ settings.favicon.path }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="72x72" href="{% if settings.favicon %}{{ settings.favicon.thumb(72,72) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="114x114" href="{% if settings.favicon %}{{ settings.favicon.thumb(114,114) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>
        <link rel="apple-touch-icon" sizes="144x144" href="{% if settings.favicon %}{{ settings.favicon.thumb(144,144) }}{% else %}./admin/media/logos/logo.ico{% endif %}"/>

        <!--begin::Fonts -->
        <link href="//fonts.googleapis.com/css?family=Nunito|Roboto" rel="stylesheet">
        <!--end::Fonts -->


        <!--begin::Global Theme Styles(used by all pages) -->
            <link href="./admin/vendors/global/vendors.bundle.css" rel="stylesheet" type="text/css" />
            {% if currentLang == 'ar'%}
                <link href="./admin/css/demo1/style.bundle.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-default.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-style-other.rtl.css" rel="stylesheet" type="text/css" />
                <link href="//fonts.googleapis.com/css?family=Cairo:300,400,600,700" rel="stylesheet">


                <!--begin::Layout Skins(used by all pages) -->
                <link href="./admin/css/demo1/skins/header/base/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/header/menu/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/brand/light.rtl.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/aside/light.rtl.css" rel="stylesheet" type="text/css" />
                <!--end::Layout Skins -->
            {% else %}
                <link href="./admin/css/demo1/style.bundle.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-default.css" rel="stylesheet" type="text/css" />
                <link href="./admin/vendors/custom/notifications/css/ns-style-other.css" rel="stylesheet" type="text/css" />

                <!--begin::Layout Skins(used by all pages) -->
                <link href="./admin/css/demo1/skins/header/base/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/header/menu/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/brand/light.css" rel="stylesheet" type="text/css" />
                <link href="./admin/css/demo1/skins/aside/light.css" rel="stylesheet" type="text/css" />
                <!--end::Layout Skins -->
            {% endif %}
        <!--end::Global Theme Styles -->

        <!--begin::Layout Skins(used by all pages) -->
        <!--end::Layout Skins -->
        {% styles %}

        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-25459653-14"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-25459653-14');
</script>

    </head>

    <body  class="kt-quick-panel--right kt-demo-panel--right kt-offcanvas-panel--right kt-header--fixed kt-header-mobile--fixed kt-subheader--enabled kt-subheader--fixed kt-subheader--solid kt-aside--enabled kt-aside--fixed"  >


     <!-- begin:: Page -->
        <!-- begin:: Header Mobile -->
        <div id="kt_header_mobile" class="kt-header-mobile  kt-header-mobile--fixed " >
            <div class="kt-header-mobile__logo">
          <a href="{{url('/')}}">
           <!--<img alt="Logo" src="{% if settings.mobile_logo %}{{ settings.mobile_logo.path }}{% else %}./admin/media/logos/logo.svg{% endif %}" style="max-height:40px"/>-->
           <img style="max-height:500px; max-width: 80%; width:auto;height:auto" src="ecargologo.jpg">

             </a>
            </div>
            <div class="kt-header-mobile__toolbar">
    <button class="kt-header-mobile__toggler kt-header-mobile__toggler--left" id="kt_aside_mobile_toggler"><span></span></button>
    <button class="kt-header-mobile__toggler" id="kt_header_mobile_toggler"><span></span></button>
             <button class="kt-header-mobile__topbar-toggler" id="kt_header_mobile_topbar_toggler"><i class="flaticon-more"></i></button>
            </div>
        </div>
        <!-- end:: Header Mobile -->
        <div class="kt-grid kt-grid--hor kt-grid--root">
      <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--ver kt-page">
                <!-- begin:: Aside -->
                <button class="kt-aside-close " id="kt_aside_close_btn"><i class="la la-close"></i></button>

                <div class="kt-aside  kt-aside--fixed  kt-grid__item kt-grid kt-grid--desktop kt-grid--hor-desktop" id="kt_aside">
                 <!-- begin:: Aside -->
                    <div class="kt-aside__brand kt-grid__item " id="kt_aside_brand">
                     <div class="kt-aside__brand-logo">
                      <a href="{{url('dashboard')}}">
                       <!--<img alt="Logo" src="{% if settings.logo %}{{ settings.logo.path }}{% else %}./admin/media/logos/logo.svg{% endif %}" style="max-height:50px;"/>-->
                       <img style="max-height:500px; max-width: 80%; width:auto;height:auto" src="ecargologo.jpg">

                      </a>
                     </div>

               <div class="kt-aside__brand-tools">
                   <button class="kt-aside__brand-aside-toggler" id="kt_aside_toggler">
                    <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <polygon id="Shape" points="0 0 24 0 24 24 0 24"/>
                                            <path d="M5.29288961,6.70710318 C4.90236532,6.31657888 4.90236532,5.68341391 5.29288961,5.29288961 C5.68341391,4.90236532 6.31657888,4.90236532 6.70710318,5.29288961 L12.7071032,11.2928896 C13.0856821,11.6714686 13.0989277,12.281055 12.7371505,12.675721 L7.23715054,18.675721 C6.86395813,19.08284 6.23139076,19.1103429 5.82427177,18.7371505 C5.41715278,18.3639581 5.38964985,17.7313908 5.76284226,17.3242718 L10.6158586,12.0300721 L5.29288961,6.70710318 Z" id="Path-94" fill="#000000" fill-rule="nonzero" transform="translate(8.999997, 11.999999) scale(-1, 1) translate(-8.999997, -11.999999) "/>
                                            <path d="M10.7071009,15.7071068 C10.3165766,16.0976311 9.68341162,16.0976311 9.29288733,15.7071068 C8.90236304,15.3165825 8.90236304,14.6834175 9.29288733,14.2928932 L15.2928873,8.29289322 C15.6714663,7.91431428 16.2810527,7.90106866 16.6757187,8.26284586 L22.6757187,13.7628459 C23.0828377,14.1360383 23.1103407,14.7686056 22.7371482,15.1757246 C22.3639558,15.5828436 21.7313885,15.6103465 21.3242695,15.2371541 L16.0300699,10.3841378 L10.7071009,15.7071068 Z" id="Path-94" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(15.999997, 11.999999) scale(-1, 1) rotate(-270.000000) translate(-15.999997, -11.999999) "/>
                                        </g>
                                    </svg>
                                </span>
                    <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <polygon id="Shape" points="0 0 24 0 24 24 0 24"/>
                                            <path d="M12.2928955,6.70710318 C11.9023712,6.31657888 11.9023712,5.68341391 12.2928955,5.29288961 C12.6834198,4.90236532 13.3165848,4.90236532 13.7071091,5.29288961 L19.7071091,11.2928896 C20.085688,11.6714686 20.0989336,12.281055 19.7371564,12.675721 L14.2371564,18.675721 C13.863964,19.08284 13.2313966,19.1103429 12.8242777,18.7371505 C12.4171587,18.3639581 12.3896557,17.7313908 12.7628481,17.3242718 L17.6158645,12.0300721 L12.2928955,6.70710318 Z" id="Path-94" fill="#000000" fill-rule="nonzero"/>
                                            <path d="M3.70710678,15.7071068 C3.31658249,16.0976311 2.68341751,16.0976311 2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 L8.29289322,8.29289322 C8.67147216,7.91431428 9.28105859,7.90106866 9.67572463,8.26284586 L15.6757246,13.7628459 C16.0828436,14.1360383 16.1103465,14.7686056 15.7371541,15.1757246 C15.3639617,15.5828436 14.7313944,15.6103465 14.3242754,15.2371541 L9.03007575,10.3841378 L3.70710678,15.7071068 Z" id="Path-94" fill="#000000" fill-rule="nonzero" opacity="0.3" transform="translate(9.000003, 11.999999) rotate(-270.000000) translate(-9.000003, -11.999999) "/>
                                        </g>
                                    </svg>
                                </span>
                   </button>
                   <!--
                   <button class="kt-aside__brand-aside-toggler kt-aside__brand-aside-toggler--left" id="kt_aside_toggler"><span></span></button>
                   -->
                  </div>
                 </div>
                    <!-- end:: Aside -->
                    <!-- begin:: Aside Menu -->
                    <div class="kt-aside-menu-wrapper kt-grid__item kt-grid__item--fluid" id="kt_aside_menu_wrapper">

                     <div id="kt_aside_menu" class="kt-aside-menu " data-ktmenu-vertical="1" data-ktmenu-scroll="1" data-ktmenu-dropdown-timeout="500">

                            <div class="kt-widget kt-widget--user-profile-1 kt-padding-l-20 kt-padding-r-20 kt-padding-b-0">
                                <div class="kt-widget__head">
                                    {% if user.avatar %}
                                        <div class="kt-widget__media">
                                            <img src="{{user.avatar.thumb(100, 100,'crop')}}" alt="image">
                                        </div>
                                   {% else %}
                                       <span class="kt-media kt-media--lg kt-media--brand ">
                                            <span>{{user.name|upper|slice(0,2)}}</span>
                                        </span>
                                   {% endif %}
                                    <div class="kt-widget__content kt-padding-t-10">
                                        <div class="kt-widget__section">
                                            <a href="javascript:;" class="kt-widget__username">
                                                {{user.name|capitalize}}
                                            </a>
                                            <span class="kt-widget__subtitle">
                                                {{'Welcome back'|__}},
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <div class="kt-widget__footer kt-margin-t-15">
                                    <a href="{{'dashboard/order-create'|page}}" class="btn btn-label-brand btn-lg btn-upper btn-block">
                                        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon kt-svg-icon--light">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                <circle id="Oval-5" fill="#000000" opacity="0.3" cx="12" cy="12" r="10"/>
                                                <path d="M11,11 L11,7 C11,6.44771525 11.4477153,6 12,6 C12.5522847,6 13,6.44771525 13,7 L13,11 L17,11 C17.5522847,11 18,11.4477153 18,12 C18,12.5522847 17.5522847,13 17,13 L13,13 L13,17 C13,17.5522847 12.5522847,18 12,18 C11.4477153,18 11,17.5522847 11,17 L11,13 L7,13 C6.44771525,13 6,12.5522847 6,12 C6,11.4477153 6.44771525,11 7,11 L11,11 Z" id="Combined-Shape" fill="#000000"/>
                                            </g>
                                        </svg>
                                         <span>{{'Add Shipment'|__}}</span>
                                     </a>
                                </div>
                            </div>

                            {% if mainMenu.menuItems %}
                          <ul class="kt-menu__nav ">
                                    {% for item in mainMenu.menuItems if not item.viewBag.isHidden %}
                                        {% if user.hasUserPermission(item.code, 'r') or item.code is empty %}
                                   <li class="kt-menu__item  {{ item.isActive or item.isChildActive or this.page.menu_breadcrumb == item.code ? 'kt-menu__item--open kt-menu__item--here' : '' }} kt-menu__item--submenu kt-menu__item--rel" {% if item.items %}data-ktmenu-submenu-toggle="hover" aria-haspopup="true"{% endif %}>
                                                <a href="{% if item.url %}{{ item.url }}{% else %}#{% endif %}" class="kt-menu__link {% if item.items %}kt-menu__toggle{% endif %}" {{ item.viewBag.isExternal ? 'target="_blank"' }}>
                                                    <span class="kt-menu__link-icon">
                                                        {{ item.viewBag.icon|raw }}
                                                    </span>
                                                    <span class="kt-menu__link-text">{{ item.title|__ }}</span>
                                                    {% if item.items %}
                                                        <i class="kt-menu__ver-arrow la la-angle-right"></i>
                                                    {% endif %}
                                                </a>
                                                {% if item.items %}
                                                    <div class="kt-menu__submenu ">
                                                        <span class="kt-menu__arrow"></span>
                                                        <ul class="kt-menu__subnav">
                                                            {% for item in item.items if not item.viewBag.isHidden %}
                                                                {% if user.hasUserPermission(item.code, 'r') or item.code is empty %}
                                                                    <li class="kt-menu__item {{ item.isActive or item.isChildActive or (currentPageUrl == item.url|replace({'[url]': url('/')})) ? 'kt-menu__item--open kt-menu__item--here' : '' }}"  aria-haspopup="true">
                                                                        <a  href="{% if item.url %}{{ item.url|replace({'[url]': url('/')}) }}{% else %}javascript:;{% endif %}" class="kt-menu__link ">
                                                                            {% if item.viewBag.icon and item.viewBag.icon != '' %}
                                                                                {{ item.viewBag.icon|raw }}
                                                                            {% else %}
                                                                                <i class="kt-menu__link-bullet kt-menu__link-bullet--dot"><span></span></i>
                                                                            {% endif %}
                                                                            <span class="kt-menu__link-text">{{ item.title|__ }}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endif %}
                                                            {% endfor %}
                                                        </ul>
                                                    </div>
                                                {% endif %}
                                            </li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            {% endif %}
                     </div>
                    </div>
                    <!-- end:: Aside Menu -->
                </div>
                <!-- end:: Aside -->

       <div class="kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor kt-wrapper" id="kt_wrapper">
        <!-- begin:: Header -->
                    <div id="kt_header" class="kt-header kt-grid__item  kt-header--fixed " >
                        <!-- begin:: Header Menu -->
                        <button class="kt-header-menu-wrapper-close" id="kt_header_menu_mobile_close_btn"><i class="la la-close"></i></button>
                        <div class="kt-header-menu-wrapper" id="kt_header_menu_wrapper">

                         <div id="kt_header_menu" class="kt-header-menu kt-header-menu-mobile  kt-header-menu--layout-default "  >
                          <ul class="kt-menu__nav ">
                           <li class="kt-menu__item">
                                        <a  href="javascript:;" class="kt-menu__link kt-menu__time">
                                            <i class="kt-menu__link-icon flaticon-clock-1"></i>
                                            <span class="kt-menu__link-text">
                                                <div class='time-frame'>
                                                    <div id='date-part' style="display: inline-block;"></div>
                                                    <div id='time-part' style="display: inline-block;"></div>
                                                </div>
                                            </span>
                                        </a>
                                    </li>
                                </ul>
                         </div>
                        </div>
                        <!-- end:: Header Menu -->
                        <!-- begin:: Header Topbar -->
                        <div class="kt-header__topbar">
                            <!--begin: Search -->
                            <div class="kt-header__topbar-item kt-header__topbar-item--search dropdown" id="kt_quick_search_toggle">
                                <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                    <span class="kt-header__topbar-icon">
             <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                            <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" id="Path-2" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
                                                <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" id="Path" fill="#000000" fill-rule="nonzero"/>
                                            </g>
                                        </svg>
                                    </span>
                                </div>
                                <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim dropdown-menu-lg">
                                    <div class="kt-quick-search kt-quick-search--dropdown kt-quick-search--result-compact" id="kt_quick_search_dropdown">
                                        <form method="GET" action="{{url('dashboard/search')}}"class="kt-quick-search__form">
                                            {{form_token()}}
                                            {{form_sessionKey()}}
                                            <div class="input-group">
                                                <div class="input-group-prepend"><span class="input-group-text"><i class="flaticon2-search-1"></i></span></div>
                                                <input type="text" class="form-control kt-quick-search__input" placeholder="{{'quick search'|__}}..." name="quicksearch" >
                                                <div class="input-group-append"><span class="input-group-text"><i class="la la-close kt-quick-search__close"></i></span></div>
                                            </div>
                                        </form>
                                        <div class="kt-quick-search__wrapper kt-scroll" data-scroll="true" data-height="325" data-mobile-height="200" style="direction: ltr;">

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--end: Search -->

                            <!--begin: Notifications -->
                            <div id="notificationsmenu" class="kt-header__topbar-item dropdown">
                                {% partial 'notificationsmenu' %}
                            </div>
                            <!--end: Notifications -->
                            {% if locales %}
                                <!--begin: Language bar -->
                                <div class="kt-header__topbar-item kt-header__topbar-item--langs">
                                    <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                        <span class="kt-header__topbar-icon kt-header__topbar-icon--info">
                                            {% for code, name in locales if activeLocale == code %}
                                                <img class="" src="./admin/media/flags/{{code}}.svg" alt="" />
                                            {% endfor %}
                                        </span>
                                    </div>
                                    <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim">
                                        <ul class="kt-nav kt-margin-t-10 kt-margin-b-10">
                                            {% for code, name in locales %}
                                                <li class="kt-nav__item {% if activeLocale == code %}kt-nav__item--active{% endif %} locale" rel="{{code}}">
                                                    <a href="#" class="kt-nav__link">
                                                        <span class="kt-nav__link-icon"><img src="./admin/media/flags/{{code}}.svg" alt="" /></span>
                                                        <span class="kt-nav__link-text">{{ name }}</span>
                                                    </a>
                                                </li>
                                            {% endfor %}
                                        </ul>
                                    </div>
                                </div>
                                <!--end: Language bar -->
                            {% endif %}

                            <!--begin: User bar -->
                            <div class="kt-header__topbar-item kt-header__topbar-item--user">
                                <div class="kt-header__topbar-wrapper" data-toggle="dropdown" data-offset="10px,0px">
                                    <div class="kt-header__topbar-user">
                                        <span class="kt-header__topbar-welcome">{{'Hi'|__}},</span>
                                        <span class="kt-header__topbar-username">{{user.name|capitalize}}</span>
                                        {% if user.avatar %}
                                             <img alt="Pic" src="{{user.avatar.thumb(25, 25,'crop')}}" />
                                        {% else %}
                                           <span class="kt-badge kt-badge--username kt-badge--unified-brand kt-badge--lg kt-badge--rounded kt-font-light kt-badge--bold">{{user.name|upper|slice(0,2)}}</span>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="dropdown-menu dropdown-menu-fit dropdown-menu-right dropdown-menu-anim dropdown-menu-xl">
                                    <!--begin: Head -->
                                    <div class="kt-user-card kt-user-card--skin-light kt-notification-item-padding-x">
                                        <div class="kt-user-card__avatar">
                                            {% if user.avatar %}
                                                 <img alt="Pic" src="{{user.avatar.thumb(60, 60,'crop')}}" />
                                            {% else %}
                                                <span class="kt-badge kt-badge--username kt-badge--unified-success kt-badge--lg kt-badge--rounded kt-badge--bold">{{user.name|capitalize|slice(0,1)}}</span>
                                             {% endif %}
                                        </div>
                                        <div class="kt-user-card__name">
                                            {{user.name|capitalize}}
                                        </div>
                                        <!--<div class="kt-user-card__badge kt-hidden">
                                            <span class="btn btn-{% if user.messages.where('read_at', null)|length > 0 %}danger{% else %}success{% endif %} btn-sm btn-bold btn-font-md">{{user.messages.where('read_at', null)|length}} {{'messages'|__}}</span>
                                        </div>-->
                                    </div>
                                    <!--end: Head -->

                                    <!--begin: Navigation -->
                                    <div class="kt-notification">
                                        <a href="{{'dashboard/profile'|page}}" class="kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-calendar-3 kt-font-success"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Profile'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'Account settings and more'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <!--
                                            {% if user.hasUserPermission('message', 'r') %}
                                                <a href="{{'dashboard/inbox'|page}}" class="kt-notification__item">
                                                    <div class="kt-notification__item-icon">
                                                        <i class="flaticon2-mail kt-font-warning"></i>
                                                    </div>
                                                    <div class="kt-notification__item-details">
                                                        <div class="kt-notification__item-title kt-font-bold">
                                                            {{'Messages'|__}}
                                                        </div>
                                                        <div class="kt-notification__item-time">
                                                            {{'Customers messages from website'|__}}{% if unreaded > 0 %} <span class="kt-badge kt-badge--danger kt-badge--inline kt-badge--pill kt-badge--rounded">{{unreaded}} {{'Unreaded'|__}}</span>{% endif %}
                                                        </div>
                                                    </div>
                                                </a>
                                            {% endif %}
                                        -->
                                        <a href="{{'dashboard/notifications'|page}}" class="kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-rocket-1 kt-font-danger"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Notifications'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'all pervious notifications'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <a href="#" class="kt-notification__item kt-hidden">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-hourglass kt-font-brand"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'My Tasks'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'latest tasks and requests'|__}}
                                                </div>
                                            </div>
                                        </a>
                                        <a href="#" class="kt-hidden kt-notification__item">
                                            <div class="kt-notification__item-icon">
                                                <i class="flaticon2-cardiogram kt-font-warning"></i>
                                            </div>
                                            <div class="kt-notification__item-details">
                                                <div class="kt-notification__item-title kt-font-bold">
                                                    {{'Billing'|__}}
                                                </div>
                                                <div class="kt-notification__item-time">
                                                    {{'billing & statements'|__}} <span class="kt-badge kt-badge--danger kt-badge--inline kt-badge--pill kt-badge--rounded">2 {{'pending'|__}}</span>
                                                </div>
                                            </div>
                                        </a>
                                        <div class="kt-notification__custom kt-space-between">
                                            <a class="btn btn-danger btn-block btn-bold kt-font-light" data-request="onLogout" data-request-data="redirect: '/'">{{'Sign Out'|__}}</a>
                                            <a href="#" target="_blank" class="btn btn-clean btn-sm btn-bold kt-hidden">{{'Upgrade Plan'|__}}</a>
                                        </div>
                                    </div>
                                    <!--end: Navigation -->
                                </div>
                            </div>
                            <!--end: User bar -->
                        </div>
                        <!-- end:: Header Topbar -->
                    </div>
                    <!-- end:: Header -->
        <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor" id="kt_content">
                        <!-- begin:: Content Head -->
                        <div class="kt-subheader   kt-grid__item" id="kt_subheader">
                            <div class="kt-container  kt-container--fluid  ">
                                <div class="kt-subheader__main">
                                    {% set crumbOptions = breadcrumbs.options %}
                                    <h3 class="kt-subheader__title"><button class="kt-subheader__mobile-toggle kt-subheader__mobile-toggle--left" id="kt_subheader_mobile_toggle"><span></span></button>{{ this.page.title|__ }}</h3>

                                    {% if this.page.description %}
                                        <span class="kt-subheader__desc">{{ this.page.description|__ }}</span>
                                    {% endif %}
                                    <span class="kt-subheader__separator kt-subheader__separator--v"></span>
                                    {% if this.page.listing %}
                                        <div class="kt-subheader__group" id="kt_subheader_search">
                                            <span class="kt-subheader__desc" id="kt_subheader_total">{% if total_records %}{{total_records}} {{'Total'|__}}{% endif %}</span>
                                            <form class="kt-margin-l-20" id="kt_subheader_search_form" style="margin-left:10px !important ">
                                                {{form_token()}}
                                                {{form_sessionKey()}}
                                                <div class="kt-input-icon kt-input-icon--right kt-subheader__search">
                                                    <input type="text" class="form-control" placeholder="{{'Quick Search'|__}}" id="generalSearch">
                                                    <span class="kt-input-icon__icon kt-input-icon__icon--right">
                                                        <span><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><rect id="bound" x="0" y="0" width="24" height="24"/><path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" id="Path-2" fill="#000000" fill-rule="nonzero" opacity="0.3"/><path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" id="Path" fill="#000000" fill-rule="nonzero"/></g></svg></span>
                                                    </span>
                                                </div>
                                            </form>
                                        </div>
                                        {% if filter_statuses %}
                                            <div class="kt-subheader__group" id="kt_subheader_search">
                                                <div class="btn-toolbar kt-margin-l-20">
                                                    <div class="dropdown" id="kt_subheader_group_actions_filter_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Filter By'|__}}<span id="filter_selected"></span></button>
                                                        <div class="dropdown-menu kt-padding-t-0 kt-padding-b-0">
                                                            <ul class="kt-nav kt-padding-t-0 kt-padding-b-10">
                                                                <li class="kt-nav__section kt-nav__section--first">
                                                                    <span class="kt-nav__section-text kt-font-boldest kt-padding-b-10">{{'Only show'|__}}:</span>
                                                                    <br />
                                                                    {% for id,name in filter_statuses %}
                                                                        <form class="kt_subheader_filter_form">
                                                                            {{form_token()}}
                                                                            {{form_sessionKey()}}
                                                                            <li class="kt-nav__item">
                                                                                <input type='hidden' class="filter" value="{{id}}" />
                                                                                <button class="btn btn-outline-dark btn-wide" style="display: block;width: 100%;" type="submit">{{name}}</button>
                                                                            </li>
                                                                        </form>
                                                                    {% endfor %}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endif %}
                                        <div class="kt-subheader__group kt-hidden" id="kt_subheader_group_actions">
                                            <div class="kt-subheader__desc"><span id="kt_subheader_group_selected_rows"></span> {{'Selected'|__}}:</div>
                                            <div class="btn-toolbar kt-margin-l-20">
                                                {% if statuses %}
                                                    <div class="dropdown" id="kt_subheader_group_actions_status_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Update Status'|__}}</button>
                                                        <div class="dropdown-menu">
                                                            <ul class="kt-nav">
                                                                <li class="kt-nav__section kt-nav__section--first"><span class="kt-nav__section-text">{{'Change status to'|__}}:</span></li>
                                                                {% for status in statuses %}
                                                                    <li class="kt-nav__item">
                                                                        <a href="#" class="kt-nav__link" data-toggle="status-change" data-status="{{status.value}}">
                                                                            <span class="kt-nav__link-text"><span class="kt-badge kt-badge--unified-success kt-badge--inline kt-badge--bold">{{status.name}}</span></span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            </ul>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% if this.page.actions.listing  is defined %}
                                                <div class="dropdown" id="kt_subheader_group_actions_shipment_change">
                                                        <button type="button" class="btn btn-label-brand btn-bold btn-sm dropdown-toggle" data-toggle="dropdown">{{'Selected Actions'|__}}<span id="filter_selected"></span></button>
                                                        <div class="dropdown-menu kt-padding-t-0 kt-padding-b-0">
                                                            <ul class="kt-nav kt-padding-t-0 kt-padding-b-10">
                                                                <li class="kt-nav__section kt-nav__section--first">
                                                                {% for button in this.page.actions.listing %}
                                                                    <button class="btn btn-outline-dark btn-sm btn-bold " id="{{button.id}}" style="display: block;width: 100%;" >{{button.title|__}}</button>
                                                                {% endfor %}
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                {% if this.page.actions.delete is not defined %}
                                                    <button class="btn btn-label-danger btn-bold btn-sm btn-icon-h" id="kt_subheader_group_actions_delete_all">{{'Delete All'|__}}</button>
                                                {% endif %}
                                            </div>
                                        </div>
                                    {% else %}
                                        {% if currentCrumb.show_crumb %}
                                            <div class="kt-subheader__breadcrumbs">
                                                {% set activeCrumb = '' %}
                                                {% for crumb in breadcrumbs %}
                                                    {% if crumb.in_crumb_trail %}
                                                        {% if not loop.last and not crumb.crumb_disabled %}
                                                            <a href="{{crumb.baseFileName | page}}" class="kt-subheader__breadcrumbs-home">
                                                                {% if loop.first %}
                                                                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon">
                                                                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                            <rect id="bound" x="0" y="0" width="24" height="24"/>
                                                                            <path d="M3.95709826,8.41510662 L11.47855,3.81866389 C11.7986624,3.62303967 12.2013376,3.62303967 12.52145,3.81866389 L20.0429,8.41510557 C20.6374094,8.77841684 21,9.42493654 21,10.1216692 L21,19.0000642 C21,20.1046337 20.1045695,21.0000642 19,21.0000642 L4.99998155,21.0000673 C3.89541205,21.0000673 2.99998155,20.1046368 2.99998155,19.0000673 L2.99999828,10.1216672 C2.99999935,9.42493561 3.36258984,8.77841732 3.95709826,8.41510662 Z M10,13 C9.44771525,13 9,13.4477153 9,14 L9,17 C9,17.5522847 9.44771525,18 10,18 L14,18 C14.5522847,18 15,17.5522847 15,17 L15,14 C15,13.4477153 14.5522847,13 14,13 L10,13 Z" id="Combined-Shape" fill="#000000"/>
                                                                        </g>
                                                                    </svg>
                                                                {% else %}{{crumb.title|__}}{% endif %}</a>
                                                        {% else %}
                                                            <span class="kt-subheader__breadcrumbs-link kt-subheader__breadcrumbs-link--active">{{crumb.title|__}}</span>
                                                        {% endif %}
                                                    {% endif %}
                                                    {% if not loop.last %}
                                                        {% set activeCrumb = crumb %}
                                                    {% endif %}
                                                {% endfor %}
                                            </div>
                                        {% endif %}
                                    {% endif %}
                                </div>
                                <div class="kt-subheader__toolbar">
                                    <div class="kt-subheader__wrapper">
                                        {% if this.page.daterange == 1 %}
                                            <div class="btn kt-subheader__btn-daterange" id="kt_dashboard_daterangepicker" data-toggle="kt-tooltip" title="{{'Select dashboard daterange'|__}}" data-placement="left">
                                                <span class="kt-subheader__btn-daterange-title" id="kt_dashboard_daterangepicker_title">{{'Today'|__}}</span>&nbsp;
                                                <span class="kt-subheader__btn-daterange-date" id="kt_dashboard_daterangepicker_date">{{'now'|date('d M')}}</span>
                                                <i class="flaticon2-calendar-1"></i>
                                            </div>
                                        {% else %}
                                            {% if this.page.actions %}
                                                {% if this.page.actions.add is defined %}
                                                    <a href="{{this.page.actions.add}}" class="btn btn-label-success btn-bold" id="add_new_btn">{{'Add new'|__}}&nbsp;<i class="flaticon2-add"></i></a>
                                                {% endif %}

                                                {% if this.page.actions.filter is defined %}
                                                    <a href="#" class="btn btn-label-success btn-bold" id="filter">{{'Filter'|__}}&nbsp;<i class="flaticon2-search"></i></a>
                                                {% endif %}
                                                {% if this.page.actions.buttons is defined %}
                                                    {% for button in this.page.actions.buttons %}
                                                        <a href="{% if button.url %}{{button.url}}{% else %}#{% endif %}" class="btn btn-label-{% if button.type %}{{button.type}}{% else %}primary{% endif %} btn-bold" id="{{button.id}}">{{button.title|__}}&nbsp;<i class="{{button.icon}}"></i></a>
                                                    {% endfor %}
                                                {% endif %}
                                                {% if this.page.actions.other is defined %}
                                                    <div class="dropdown dropdown-inline" data-toggle-="kt-tooltip" title="Quick actions" data-placement="left">
                                                        <a href="#" class="btn kt-subheader__btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                            {{'Other Actions'|__}} &nbsp;

                                                            <!--<i class="flaticon2-calendar-1"></i>-->
                                                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1" class="kt-svg-icon kt-svg-icon--sm">
                                                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                    <rect id="bound" x="0" y="0" width="24" height="24" />
                                                                    <rect id="Rectangle-8" fill="#000000" x="4" y="5" width="16" height="3" rx="1.5" />
                                                                    <path d="M7.5,11 L16.5,11 C17.3284271,11 18,11.6715729 18,12.5 C18,13.3284271 17.3284271,14 16.5,14 L7.5,14 C6.67157288,14 6,13.3284271 6,12.5 C6,11.6715729 6.67157288,11 7.5,11 Z M10.5,17 L13.5,17 C14.3284271,17 15,17.6715729 15,18.5 C15,19.3284271 14.3284271,20 13.5,20 L10.5,20 C9.67157288,20 9,19.3284271 9,18.5 C9,17.6715729 9.67157288,17 10.5,17 Z" id="Combined-Shape" fill="#000000" opacity="0.3" />
                                                                </g>
                                                            </svg>
                                                        </a>
                                                        <div class="dropdown-menu dropdown-menu-fit dropdown-menu-md dropdown-menu-right">

                                                            <!--begin::Nav-->
                                                            <ul class="kt-nav">
                                                                {% for link in this.page.actions.other %}
                                                                    <li class="kt-nav__item">
                                                                        <a href="{{link.url}}" class="kt-nav__link">
                                                                            <i class="kt-nav__link-icon {{link.icon}}"></i>
                                                                            <span class="kt-nav__link-text">{{link.name}}</span>
                                                                        </a>
                                                                    </li>
                                                                {% endfor %}
                                                            </ul>

                                                            <!--end::Nav-->
                                                        </div>
                                                    </div>
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end:: Content Head -->
                        <!-- begin:: Content -->
                     <div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">



                       {% if settings.demo_mode %}
                         <div class="alert alert-warning" role="alert">
                                 {{'Please be aware that data will be replaced on this demo every 6 hours so that every one can test this demo as he needs without corrupting the data.'|__}}
                          </div>
                      {% endif %}

                       {% if settings.google.map.key == '' %}
                          <div class="alert alert-warning" role="alert">
                            {{'Google maps functions will not be activated until you enter your google key'|__}} <a href="{{url('dashboard/settings/google')}}">&nbsp;{{'Here'|__}}</a>, {{'you can follow this tutorial to generate one'|__}} <a href="https://developers.google.com/maps/documentation/embed/get-api-key" target="_blank">&nbsp;{{'Get an API Key'|__}}</a>
                          </div>
                      {% endif %}



                            {% page %}
               </div>
                        <!-- end:: Content -->
                    </div>

        <!-- begin:: Footer -->
                    <div class="kt-footer  kt-grid__item kt-grid kt-grid--desktop kt-grid--ver-desktop" id="kt_footer">
                     <div class="kt-container  kt-container--fluid ">
                      <div class="kt-footer__copyright">
                       {{ "now"|date("Y") }}&nbsp;&copy;&nbsp;<a href="//spotlayer.com" target="_blank" class="kt-link">{{'Powered By Spotlayer'|__}}</a>.
                      </div>
                      <div class="kt-footer__menu">
                       <a href="//spotlayer.com/#contact" target="_blank" class="kt-link">{{ 'Support'|__ }}</a>
                      </div>
                     </div>
                    </div>
                    <!-- end:: Footer -->
                </div>
      </div>
     </div>
        <!-- end:: Page -->


        <!-- begin::Scrolltop -->
        <div id="kt_scrolltop" class="kt-scrolltop">
         <i class="fa fa-arrow-up"></i>
        </div>
        <!-- end::Scrolltop -->

        <!-- begin::Global Config(global config for global JS sciprts) -->
        <script>
            {% set timezone = settings.timezone_offset|split(':') %}
            {% set timezone_offset = (timezone.0*60) + (timezone.1) %}
            {% set timezone_offset_hours = (timezone_offset/60) %}

            var KTAppOptions = {
                "colors":{
                    "state":{
                        "brand":"#5d78ff",
                        "light":"#ffffff",
                        "dark":"#282a3c",
                        "primary":"#5867dd",
                        "success":"#34bfa3",
                        "info":"#36a3f7",
                        "warning":"#ffb822",
                        "danger":"#fd3995"
                    },
                    "base":{
                        "label":[
                            "#c5cbe3",
                            "#a1a8c3",
                            "#3d4465",
                            "#3e4466"
                        ],
                        "shape":[
                            "#f0f3ff",
                            "#d9dffa",
                            "#afb4d4",
                            "#646c9a"
                        ]
                    }
                },
                "text":{
                    'loading' : '{{"Loading ..."|__}}'
                },
                "timezone_offset": "{{timezone_offset}}",
                "timezone_offset_hours": "{{timezone_offset_hours}}",
                "dateformat": "{{settings.dateformat|replace({'d':'dd', 'm':'mm', 'Y':'yyyy'})}}",
                "daterangeformat": "{{settings.dateformat|replace({'d':'DD', 'm':'MM', 'M':'MMM'})}}"
            };
        </script>
        <!-- end::Global Config -->

     <!--begin::Global Theme Bundle(used by all pages) -->
            <script src="./admin/vendors/custom/notifications/js/modernizr.custom.js" type="text/javascript"></script>
            <script src="./admin/vendors/custom/notifications/js/classie.js" type="text/javascript"></script>
            <script src="./admin/vendors/custom/notifications/js/notificationFx.js" type="text/javascript"></script>
        <script src="./admin/vendors/global/vendors.bundle.js" type="text/javascript"></script>
        <script src="./admin/js/demo1/scripts.bundle.js" type="text/javascript"></script>
           {% if settings.notifications.live == 1 %}
               <script src="//js.pusher.com/5.0/pusher.min.js"></script>
           {% endif %}
  <!--end::Global Theme Bundle -->

        <!--begin::Page Scripts(used by this page) -->
            {% framework extras %}
            {% scripts %}
            <script type="text/javascript">
                function flashRequest(type,message){

                    swal.fire({
                        buttonsStyling: false,
                        title: message,
                        type: type,
                        showConfirmButton: false,
                        timer: 3000
                    });
                }
                KTUtil.ready(function () {

                    $.validator.addMethod("customDateValidator", function(value, element) {
                            // parseDate throws exception if the value is invalid
                            try{$.datepicker.parseDate( KTAppOptions.dateformat, value);return true;}
                            catch(e){return false;}
                        },
                        "{{'Please enter a valid date'|__}}"
                    );

                    if('dd/mm/yyyy' == KTAppOptions.dateformat){
                        console.log(KTAppOptions.dateformat);
                        $.validator.methods.date = function (value, element) {
                            value = dateValue(value);
                            return this.optional(element) || !/Invalid|NaN/.test(new Date(value).toString());;
                        }

                        function dateValue(value) {
                            var date = value.split("/");
                            return date[2] + "/" + date[1] + "/" + date[0]
                        }
                    }

                    $('body').on('click', '.locale', function(e){
                        e.preventDefault();
                        var selected = $(this).attr('rel');
                        if(selected != ''){
                            $.request('onSwitchLocale', {
                                data: {locale: selected}
                            });
                        }
                    });
                    $('select').selectpicker({
                        noneSelectedText: '{{"Nothing selected"|__}}',
                    });
                    if (KTUtil.get('kt_quick_search_dropdown')) {
                        KTQuickSearch().init(KTUtil.get('kt_quick_search_dropdown'));
                    }

                    if (KTUtil.get('kt_quick_search_inline')) {
                        KTQuickSearchInline().init(KTUtil.get('kt_quick_search_inline'));
                    }

                    if (KTUtil.get('kt_quick_search_offcanvas')) {
                        KTQuickSearchOffcanvas().init(KTUtil.get('kt_quick_search_offcanvas'));
                    }

                    $('input.decimal').blur(function(){
                        var num = parseFloat($(this).val());
                        var cleanNum = num.toFixed({{primary_currency.initbiz_money_fraction_digits}});
                        $(this).val(cleanNum);
                    });

                    var arrows;
                    if (KTUtil.isRTL()) {
                        arrows = {
                            leftArrow: '<i class="la la-angle-right"></i>',
                            rightArrow: '<i class="la la-angle-left"></i>'
                        }
                    } else {
                        arrows = {
                            leftArrow: '<i class="la la-angle-left"></i>',
                            rightArrow: '<i class="la la-angle-right"></i>'
                        }
                    }

                    $.fn.datepicker.dates['{{currentLang}}'] = {
                        days: ["{{'Sunday'|__}}", "{{'Monday'|__}}", "{{'Tuesday'|__}}", "{{'Wednesday'|__}}", "{{'Thursday'|__}}", "{{'Friday'|__}}", "{{'Saturday'|__}}"],
                        daysShort: ["{{'Sun'|__}}", "{{'Mon'|__}}", "{{'Tue'|__}}", "{{'Wed'|__}}", "{{'Thu'|__}}", "{{'Fri'|__}}", "{{'Sat'|__}}"],
                        daysMin: ["{{'Su'|__}}", "{{'Mo'|__}}", "{{'Tu'|__}}", "{{'We'|__}}", "{{'Th'|__}}", "{{'Fr'|__}}", "{{'Sa'|__}}"],
                        months: ["{{'January'|__}}", "{{'February'|__}}", "{{'March'|__}}", "{{'April'|__}}", "{{'May'|__}}", "{{'June'|__}}", "{{'July'|__}}", "{{'August'|__}}", "{{'September'|__}}", "{{'October'|__}}", "{{'November'|__}}", "{{'December'|__}}"],
                        monthsShort: ["{{'Jan'|__}}", "{{'Feb'|__}}", "{{'Mar'|__}}", "{{'Apr'|__}}", "{{'May'|__}}", "{{'Jun'|__}}", "{{'Jul'|__}}", "{{'Aug'|__}}", "{{'Sep'|__}}", "{{'Oct'|__}}", "{{'Nov'|__}}", "{{'Dec'|__}}"],
                        today: "{{'Today'|__}}",
                        clear: "{{'Clear'|__}}",
                        format: KTAppOptions.dateformat,
                        titleFormat: KTAppOptions.dateformat, /* Leverages same syntax as 'format' */
                        weekStart: 0
                    };
                    $('.date').datepicker({
                        rtl: KTUtil.isRTL(),
                        language: '{{currentLang}}',
                        format: KTAppOptions.dateformat,
                        todayHighlight: true,
                        orientation: "bottom left",
                        templates: arrows
                    });

                        var momentNow = moment();

                    console.log({{timezone_offset}});
                    console.log({{timezone_offset_hours}});
                    console.log(momentNow.utcOffset(4));
                    console.log(momentNow.utcOffset({{timezone_offset_hours}}));
                    var interval = setInterval(function() {
                        if('ar' == '{{currentLang}}'){
                            moment.locale('ar-sa');
                        }
                        var momentNow = moment();
                        $('#date-part').html(momentNow.utcOffset({{timezone_offset_hours}}).format(KTAppOptions.daterangeformat) + ' ');
                        $('#time-part').html(momentNow.utcOffset({{timezone_offset_hours}}).format('hh:mm:ss A'));
                    }, 100);

                });

                "use strict";

                var KTQuickSearch = function() {
                    var target;
                    var form;
                    var input;
                    var closeIcon;
                    var resultWrapper;
                    var resultDropdown;
                    var resultDropdownToggle;
                    var inputGroup;
                    var query = '';

                    var hasResult = false;
                    var timeout = false;
                    var isProcessing = false;
                    var requestTimeout = 200; // ajax request fire timeout in milliseconds
                    var spinnerClass = 'kt-spinner kt-spinner--input kt-spinner--sm kt-spinner--brand kt-spinner--right';
                    var resultClass = 'kt-quick-search--has-result';
                    var minLength = 2;

                    var showProgress = function() {
                        isProcessing = true;
                        KTUtil.addClass(inputGroup, spinnerClass);

                        if (closeIcon) {
                            KTUtil.hide(closeIcon);
                        }
                    }

                    var hideProgress = function() {
                        isProcessing = false;
                        KTUtil.removeClass(inputGroup, spinnerClass);

                        if (closeIcon) {
                            if (input.value.length < minLength) {
                                KTUtil.hide(closeIcon);
                            } else {
                                KTUtil.show(closeIcon, 'flex');
                            }
                        }
                    }

                    var showDropdown = function() {
                        if (resultDropdownToggle && !KTUtil.hasClass(resultDropdown, 'show')) {
                            $(resultDropdownToggle).dropdown('toggle');
                            $(resultDropdownToggle).dropdown('update');
                        }
                    }

                    var hideDropdown = function() {
                        if (resultDropdownToggle && KTUtil.hasClass(resultDropdown, 'show')) {
                            $(resultDropdownToggle).dropdown('toggle');
                        }
                    }

                    var processSearch = function() {
                        if (hasResult && query === input.value) {
                            hideProgress();
                            KTUtil.addClass(target, resultClass);
                            showDropdown();
                            KTUtil.scrollUpdate(resultWrapper);

                            return;
                        }

                        query = input.value;

                        KTUtil.removeClass(target, resultClass);
                        showProgress();
                        hideDropdown();

                        $.request('onQuicksearch', {
                            data: {query: query},
                            success: function(res) {
                                hasResult = true;
                                hideProgress();
                                KTUtil.addClass(target, resultClass);
                                KTUtil.setHTML(resultWrapper, res.result);
                                showDropdown();
                                KTUtil.scrollUpdate(resultWrapper);
                            },
                            error: function(res) {
                                hasResult = false;
                                hideProgress();
                                KTUtil.addClass(target, resultClass);
                                KTUtil.setHTML(resultWrapper, '<span class="kt-quick-search__message kt-font-danger">{{"Connection error. Pleae try again later"|__}}.</div>');
                                showDropdown();
                                KTUtil.scrollUpdate(resultWrapper);
                            }
                        });
                    }

                    var handleCancel = function(e) {
                        input.value = '';
                        query = '';
                        hasResult = false;
                        KTUtil.hide(closeIcon);
                        KTUtil.removeClass(target, resultClass);
                        hideDropdown();
                    }

                    var handleSearch = function() {
                        if (input.value.length < minLength) {
                            hideProgress();
                            hideDropdown();

                            return;
                        }

                        if (isProcessing == true) {
                            return;
                        }

                        if (timeout) {
                            clearTimeout(timeout);
                        }

                        timeout = setTimeout(function() {
                            processSearch();
                        }, requestTimeout);
                    }

                    return {
                        init: function(element) {
                            // Init
                            target = element;
                            form = KTUtil.find(target, '.kt-quick-search__form');
                            input = KTUtil.find(target, '.kt-quick-search__input');
                            closeIcon = KTUtil.find(target, '.kt-quick-search__close');
                            resultWrapper = KTUtil.find(target, '.kt-quick-search__wrapper');
                            resultDropdown = KTUtil.find(target, '.dropdown-menu');
                            resultDropdownToggle = KTUtil.find(target, '[data-toggle="dropdown"]');
                            inputGroup = KTUtil.find(target, '.input-group');

                            // Attach input keyup handler
                            KTUtil.addEvent(input, 'keyup', handleSearch);
                            KTUtil.addEvent(input, 'focus', handleSearch);

                            // Prevent enter click
                            form.onkeypress = function(e) {
                                var key = e.charCode || e.keyCode || 0;
                                if (key == 13) {
                                    e.preventDefault();
                                }
                            }

                            KTUtil.addEvent(closeIcon, 'click', handleCancel);
                        }
                    };
                };

                var KTQuickSearchInline = KTQuickSearch;
                var KTQuickSearchOffcanvas = KTQuickSearch;
                {% if settings.notifications.live == 1 %}
                    var pusher = new Pusher('{{ settings.notifications.pusher.key }}', {cluster: '{{ settings.notifications.pusher.cluster }}',forceTLS: true});
                    var presenceChannel = pusher.subscribe('spotlayer');
                    presenceChannel.bind('notification', function(data) {
                        //if(data.id != {{user.id}}){
                        if(data.for_userid == {{user.id}}){
                            setTimeout( function() {
                                // create the notification
                                // check if the reciever is the targeted user
                                if(data.thumb == 'icon'){
                                    var thumb_content = '<i class="'+data.icon+'"></i>';
                                }else{
                                    var thumb_content = '<img src="./admin/vendors/custom/notifications/img/default.jpg"/>';
                                }
                                var notification = new NotificationFx({
                                    message : '<div class="ns-thumb '+data.thumb+'">'+thumb_content+'</div><div class="ns-content notice"><p><a href="{{url('dashboard/notifications')}}">'+data.sender.name+'</a> '+data.subject+'.</p></div>',
                                    layout : 'other',
                                    ttl : 5000,
                                    effect : 'thumbslider',
                                    type : 'notice', // notice, warning, error or success
                                    onClose : function() {
                                        //dismiss notification and make it as readed;
                                    }
                                });
                                // show the notification
                                notification.show();
                                if(data.sound){
                                    let audio = new Audio('./admin/media/notifications/notification.mp3');
                                    audio.play();
                                }
                                $.request('onRefreshTime', {
                                    data: {id: {{user.id}}},
                                    update: { notificationsmenu: '#notificationsmenu' },
                                    complete: function(e) {
                                        notificationPanel();
                                    }
                                });
                            }, 4000 );
                        }


                    });
                {% endif %}
            </script>
        <!--end::Page Scripts -->
    </body>
    <!-- end::Body -->
</html>";s:4:"code";s:10425:"use \Spot\Shipment\Models\Settings;
use RainLab\Translate\Classes\Translator;
use RainLab\Translate\Components\LocalePicker;
protected $translator;
function onStart()
{
    if(!Auth::getUser()){
        \Flash::error($this['theme_lang']['not_allowed']);
        return Redirect::intended('login');
    }

    $this['unreaded']           =   \Zainab\SimpleContact\Models\SimpleContact::where('is_new', 1)->count();

    $this['currentPageUrl']     =   str_replace('/'.$this['currentLang'], '',$this->currentPageUrl());
}
function onQuicksearch()
{
    $data = post();
    $no_results = 0;


    $search     =   $data['query'];

    if(Auth::getUser()->hasUserPermission(["order"],'r')) {
        $orders    =   \Spot\Shipment\Models\Order::orderBy('id', 'DESC')->where(function($q) use($search){
                            $q->where('id', $search);

                            $settings       = \Spot\Shipment\Models\Settings::instance();
                            $length         = strlen($settings['tracking']['prefix_order']);
                            $prefix         = substr($search, 0, $length);
                            if (strcasecmp($prefix, $settings['tracking']['prefix_order']) == 0) {
                                $search =   str_ireplace($settings['tracking']['prefix_order'],'',$search);
                            }
                            $q->orWhere('number', 'like', "%$search%")
                            ->orWhere(function($q) use ($search){
                                $q->whereHas('sender',function($q) use($search){
                                    $q->where('name', 'like', "%$search%")
                                    ->orWhere('username', $search)
                                    ->orWhere('mobile', $search)
                                    ->orWhere('email', $search);
                                });
                            })
                            ->orWhere(function($q) use ($search){
                                $q->whereHas('receiver',function($q) use($search){
                                    $q->where('name', 'like', "%$search%")
                                    ->orWhere('username', $search)
                                    ->orWhere('mobile', $search)
                                    ->orWhere('email', $search);
                                });
                            });
                        });



        switch (Auth::getUser()->role_id) {
            case 6:
                $orders    =   $orders->whereIn('office_id', Auth::getUser()->manage->pluck('id')->toArray());
                break;
            case 5:
                $orders    =   $orders->where(function($q){
                    $q->where('sender_id', Auth::getUser()->id);
                    $q->orWhere('receiver_id', Auth::getUser()->id);
                });
                break;
            case 4:
                if(Auth::getUser()->is_superuser){
                    $orders    =   $orders->whereIn('office_id', Auth::getUser()->office);
                }else{
                    $orders    =   $orders->where(function($q){
                        $q->where(function($q){
                            //Get all employees
                            $q->where('assigned_id', Auth::getUser()->id);
                        });
                        $q->orWhere(function($q){
                            $q->whereHas('manifest', function($q){
                                $q->where(function($q) {
                                    $q->whereIn('driver_id', Auth::getUser()->id);
                                });
                                $q->orWhere(function($q){
                                    $q->whereIn('employee_id', Auth::getUser()->id);
                                });
                            });
                        });
                    });
                }
                break;
            case 3:
                $employees  =   \RainLab\User\Models\User::whereHas('groups',function($q){$q->whereIn('user_group_id', Auth::getUser()->groups->pluck('id')->toArray());})->pluck('id')->toArray();
                $orders    =   $orders->where(function($q) use($employees){
                    $q->where(function($q) use($employees){
                        //Get all employees
                        $q->whereIn('assigned_id', $employees);
                    });
                    $q->orWhere(function($q) use($employees){
                        $q->whereHas('manifest', function($q) use($employees){
                            $q->where(function($q) use($employees){
                                $q->whereIn('driver_id', $employees);
                            });
                            $q->orWhere(function($q) use($employees){
                                $q->whereIn('employee_id', $employees);
                            });
                        });
                    });
                });
                break;
        }

        $orders         =   $orders->get();
    }

    if(Auth::getUser()->hasUserPermission(["client"],'r')) {
        $clients    =   \RainLab\User\Models\User::where('role_id', 5)->orderBy('id', 'DESC')->where(function($q) use($search){
                            $q->orWhere('name', 'like', "%$search%");
                            $q->orWhere('username', 'like', "%$search%");
                            $q->orWhere('mobile', 'like', "%$search%");
                            $q->orWhere('email', 'like', "%$search%");
                        })->get();
    }

    if(!isset($clients) && !isset($orders)){
        $html = '
            <div class="kt-quick-search__result">
             <div class="kt-quick-search__message">
              '.$this['theme_lang']['no_records_found'].'
             </div>
         </div>
        ';
    }else{
        if((isset($clients) && empty($clients->toArray())) && (isset($orders) && empty($orders->toArray()))){
            $html = '
                <div class="kt-quick-search__result">
                 <div class="kt-quick-search__message">
                  '.$this['theme_lang']['no_records_found'].'
                 </div>
             </div>
            ';
        }else{
            $html = '
            <div class="kt-quick-search__result">';
                if(isset($orders)){
                    $html .= '<div class="kt-quick-search__category">
                        '.$this['theme_lang']['orders'].'
                    </div>';
                    $html .= '<div class="kt-quick-search__section">';
                    if(!empty($orders->toArray())){
                            foreach($orders as $order){
                                $html .= '<div class="kt-quick-search__item">
                                    <div class="kt-quick-search__item-img kt-quick-search__item-img--file">
                                        <img src="./admin/media/files/doc.svg" alt="" />
                                    </div>
                                    <div class="kt-quick-search__item-wrapper">
                                        <a href="'.url('dashboard/shipments').'/'.$order->id.'/view" class="kt-quick-search__item-title">
                             '.$this['settings']['tracking']['prefix_order'].$order->number.'
                            </a>
                                        <div class="kt-quick-search__item-desc">
                                            '.$this['theme_lang']['by'].' '.$order->sender->name.'
                                        </div>
                                    </div>
                                </div>';
                            }
                    }else{
                        $html .= '<div class="kt-quick-search__result">
                         <div class="kt-quick-search__message">
                          '.$this['theme_lang']['no_records_found'].'
                         </div>
                     </div>';
                    }
                    $html .= '</div>';
                }

                if(isset($clients)){
                    $html .= '<div class="kt-quick-search__category">
                        '.$this['theme_lang']['users'].'
                    </div>
                    <div class="kt-quick-search__section">';
                        if(!empty($clients->toArray())){
                            foreach($clients as $client){
                                $html .= '<div class="kt-quick-search__item">';
                                if($client->avatar){
                                    $html .= '<div class="kt-quick-search__item-img">
                                        <img src="'.$client->avatar->getThumb(100, 100, ['mode' => 'crop']).'" alt="" />
                                    </div>';
                                }else{
                                    $html .= '<div class="kt-quick-search__item-img">
                                        <!--<span class="kt-header__topbar-icon kt-header__topbar-icon--brand kt-badge--bold">{{user.name|capitalize|slice(0,1)}}</span>-->
                                        <span class="kt-header__topbar-icon kt-header__topbar-icon--brand kt-badge--bold">'.strtoupper(substr($client->name, 0, 2)).'</span>
                                    </div>';
                                }
                                $html .= '<div class="kt-quick-search__item-wrapper">
                                    <a href="'.url('dashboard/clients').'/'.$client->id.'/view" class="kt-quick-search__item-title">
                             '.$client->name.'
                            </a>
                                    <div class="kt-quick-search__item-desc">
                                        '.$client->mobile.'
                                    </div>
                                </div>';
                            }
                        }else{
                            $html .= '<div class="kt-quick-search__result">
                             <div class="kt-quick-search__message">
                              '.$this['theme_lang']['no_records_found'].'
                             </div>
                         </div>';
                        }
                    $html .= '</div>
                    </div>';
                }
            $html .= '</div>';
        }
    }
    return $html;
}
function onRefreshTime(){

}";s:11:"description";s:12:"Admin layout";s:12:"localePicker";a:1:{s:8:"forceUrl";s:1:"1";}s:19:"staticMenu mainMenu";a:1:{s:4:"code";s:9:"main-menu";}s:17:"staticBreadcrumbs";a:0:{}s:7:"account";a:3:{s:8:"redirect";s:5:"login";s:9:"paramCode";s:4:"code";s:11:"forceSecure";s:1:"0";}s:7:"session";a:1:{s:8:"security";s:3:"all";}s:11:"breadcrumbs";a:3:{s:13:"main-ol-class";s:10:"breadcrumb";s:12:"active-class";s:6:"active";s:14:"disabled-class";s:8:"disabled";}s:13:"resetPassword";a:1:{s:9:"paramCode";s:4:"code";}}}